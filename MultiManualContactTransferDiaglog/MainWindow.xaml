<Controls:MetroWindow x:Class="MultiManualContactTransferDiaglog.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:Controls="clr-namespace:MahApps.Metro.Controls;assembly=MahApps.Metro"
        xmlns:local="clr-namespace:MultiManualContactTransferDiaglog"
        xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
        xmlns:vc="clr-namespace:ValueConverters;assembly=ValueConverters"
        mc:Ignorable="d"
         Title="" Height="960" Width="940" Background="Black" ResizeMode="NoResize" >
    <Controls:MetroWindow.Resources>
        <vc:StageStateToValueTextConverter x:Key="StageStateToValueTextConverter" />
        <vc:StageStateToValueConverter x:Key="StageStateToValueConverter" />
        <vc:FoupLotStateValueConverter x:Key="FoupLotStateValueConverter" />
        <vc:StageErrorStateToVisibilityConvertet x:Key="StageErrorStateToVisibilityConvertet"/>
        <vc:AlignStateToPathFillConverter x:Key="AlignStateToPathFillConv"/>
        <vc:AlignStateToPathDataConverter x:Key="AlignStateToPathDataConv"/>
        <vc:WaferOntheChuckToColorConverter x:Key="WaferOntheChuckToColorConv"/>
        <vc:CellObjectForeGroundConverter x:Key="CellObjectForeGroundConv"/>

        <vc:ScanStateValueConverter x:Key="ScanStateValueConverter" />
        <vc:EnumGPLoaderWaferStatusTextColorConverter x:Key="EnumGPLoaderWaferStatusTextColorConverter" />

        <vc:EnumSlotTextConverter x:Key="EnumSlotTextConverter" />
        <vc:EnumSlotTextConverter1 x:Key="EnumSlotTextConverter1" />
        <vc:EnumStageWaferStatusTextConverter x:Key="WaferStatusToTextConv" />
        <vc:GPHandlingBtnEnableConverter x:Key="GPHandlingBtnEnableConverter" />
        <vc:TimeVisibiltyConvert x:Key="TimeVisibiltyConvert" />
        <local:ImageConverter x:Key="ImageConverter"/>
        <local:TransferObjectLabelConverter x:Key="TransferObjectLabelConverter"/>
        <local:ListViewConverter x:Key="ListViewConverter"/>

        <vc:StageLoaderErrorStateCon x:Key="StageLoaderErrorStateConv"/>
        <vc:ViewTargetConverter x:Key="ViewTargetConverter"/>

        <vc:SubsStatusToValueConverter x:Key="StatusToColorConv" />
        <vc:CassetteTypeConverter x:Key="CassetteTypeConv"/>
        <Style x:Key="FoupModuleNameLabelStyle" TargetType="Label">
            <Setter Property="FontSize" Value="18"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="HorizontalAlignment" Value="Center"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="HorizontalContentAlignment" Value="Center"/>
            <Setter Property="BorderBrush" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
        </Style>
        <Style x:Key="GroupBoxForegroundStyle" TargetType="GroupBox">
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Background" Value="DimGray"/>
        </Style>
        <Style x:Key="ModuleNameLabelStyle" TargetType="Label">
            <Setter Property="FontSize" Value="18"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="HorizontalAlignment" Value="Center"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="HorizontalContentAlignment" Value="Center"/>
            <Setter Property="BorderBrush" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
        </Style>
      </Controls:MetroWindow.Resources>
            <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="0.8*"/>
            <RowDefinition Height="20*"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="5*"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <Grid Grid.Row="0" Grid.Column="0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="0.8*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Border BorderBrush="LimeGreen" BorderThickness="3" Margin="2">
            <StackPanel Orientation="Horizontal">
                    <Label Margin="0,-4,0,0" FontSize="15" Padding="3" Foreground="LimeGreen">Cell Number :</Label>
                    <Label Margin="0,-4,0,0" FontSize="15" Padding="3" Foreground="LimeGreen" Content="{Binding StageIndex}"></Label>
                </StackPanel>
            </Border>
            <Border BorderBrush="{Binding WaferStatus, Converter={StaticResource StatusToColorConv}}"  BorderThickness="3" Margin="2" Grid.Column="1" Grid.ColumnSpan="2">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <StackPanel Grid.Column="0" Orientation="Horizontal">
                        <Label Margin="0,0,0,0" Padding="3" FontSize="15" Foreground="{Binding WaferStatus, Converter={StaticResource StatusToColorConv}}" 
                               >WAFER : </Label>
                        <Label Margin="0,0,0,0"  Padding="3" FontSize="15" Foreground="{Binding WaferStatus, Converter={StaticResource StatusToColorConv}}"  Content="{Binding WaferID}"></Label>
                    </StackPanel>
                <StackPanel Grid.Column="1" Orientation="Horizontal">
                        <Label Margin="0,0,0,0" Padding="3" FontSize="15" Foreground="{Binding WaferStatus, Converter={StaticResource StatusToColorConv}}" >|</Label>
                        <Label Margin="0,0,0,0"  Padding="3" FontSize="15" Foreground="{Binding WaferStatus, Converter={StaticResource StatusToColorConv}}"  Content="{Binding WaferOrigin}"></Label>
                    </StackPanel>
                </Grid>
            </Border>
            <Border BorderBrush="{Binding CardStatus, Converter={StaticResource StatusToColorConv}}"  BorderThickness="3" Margin="2" Grid.Column="3">
                <StackPanel Orientation="Horizontal">
                    <Label Margin="0,0,0,0" Padding="3" FontSize="15" Foreground="{Binding CardStatus, Converter={StaticResource StatusToColorConv}}">CARD : </Label>
                    <Label Margin="0,0,0,0"  Padding="3" FontSize="15" Foreground="{Binding CardStatus, Converter={StaticResource StatusToColorConv}}"  Content="{Binding CardID}"></Label>
                </StackPanel>
            </Border>
        </Grid>
        <Grid Grid.Column="0" Grid.Row="1"
                        Background="#333333"
                        Margin="8"
                        HorizontalAlignment="Center" >
            <ListView VirtualizingPanel.IsContainerVirtualizable="True"
                          VirtualizingPanel.IsVirtualizing="True"
                          VirtualizingPanel.IsVirtualizingWhenGrouping="True"  
                Grid.Row="0" Grid.Column="1" Grid.ColumnSpan="1" x:Name="FoupListView" 
                      ItemsSource="{Binding Foups}" Background="#FF1C1C1F" VerticalAlignment="Stretch"
                      ScrollViewer.HorizontalScrollBarVisibility="Disabled" SelectedItem="{Binding SelectedFoup}"
                    ScrollViewer.VerticalScrollBarVisibility="Disabled"
                                      Focusable="False" 
                      MinWidth="30"  MinHeight="40"
                                      Margin="-1, 0, 0, 0">
                <ListView.ItemContainerStyle>
                    <Style TargetType="ListViewItem">
                        <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                        <Setter Property="VerticalContentAlignment" Value="Stretch" />
                    </Style>
                </ListView.ItemContainerStyle>
                <ListView.ItemsPanel>
                    <ItemsPanelTemplate>
                        <StackPanel Orientation="Horizontal" />
                        <!--<WrapPanel Orientation="Horizontal"></WrapPanel>-->
                    </ItemsPanelTemplate>
                </ListView.ItemsPanel>
                <ListView.ItemTemplate>
                    <DataTemplate>
                        <Border BorderBrush="{Binding ScanState, Converter={StaticResource ScanStateValueConverter}}" BorderThickness="1" Width="240" >
                            <Grid >
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="92*"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                    <Image Width="64" Height="48" HorizontalAlignment="Left" VerticalAlignment="Top" >
                                        <Image.Source>
                                            <BitmapImage UriSource="./Resources/FOUP.png"/>
                                        </Image.Source>
                                    </Image>
                                    <Label Content="{Binding Name}" FontSize="17" FontWeight="Bold" HorizontalAlignment="Center"  VerticalAlignment="Top">
                                        <!--<Label.Content>
                                            <MultiBinding Converter="{StaticResource CassetteTypeConv}">
                                                <Binding Path="Name"/>
                                                <Binding Path="CassetteType"/>
                                            </MultiBinding>
                                        </Label.Content>-->
                                    </Label>
                                    <Label Content="{Binding CassetteType}" ContentStringFormat="[{0}]" FontSize="14" HorizontalAlignment="Left"  VerticalAlignment="Center"
                                               Style="{StaticResource ModuleNameLabelStyle}" Grid.Column="1" Foreground="#9370d8" Margin="-30,0,0,0" >
                                        <Label.Visibility>
                                            <MultiBinding Converter="{StaticResource CassetteTypeConv}">
                                                <Binding Path="CassetteType"/>
                                            </MultiBinding>
                                        </Label.Visibility>
                                    </Label>
                                </StackPanel>
                                <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Center">
                                    <Label Content="State : " FontSize="11" FontWeight="Bold"   VerticalAlignment="Top" 
                                       Style="{StaticResource ModuleNameLabelStyle}" />
                                    <Label Content="{Binding State}" FontSize="10" FontWeight="Bold"  VerticalAlignment="Top" 
                                       Style="{StaticResource ModuleNameLabelStyle}"/>
                                    <Label Content="Scan : " FontSize="11" FontWeight="Bold"   VerticalAlignment="Top" 
                                       Style="{StaticResource ModuleNameLabelStyle}"/>
                                    <Label Content="{Binding ScanState}" FontSize="10" FontWeight="Bold"  VerticalAlignment="Top"
                                       Style="{StaticResource ModuleNameLabelStyle}"/>
                                </StackPanel>
                                <Grid Grid.Row="2" Background="#FF1C1C1F" >
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <ListView Grid.Column="0"  HorizontalAlignment="Center" x:Name="SlotListView" 
                               ItemsSource="{Binding Slots}" Background="#FF1C1C1F" Focusable="False" 
                               ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                                              ScrollViewer.VerticalScrollBarVisibility="Disabled">
                                        <i:Interaction.Triggers>
                                            <i:EventTrigger EventName="SelectionChanged">
                                                <i:InvokeCommandAction Command="{Binding Path=DataContext.ObjectClickCommand, RelativeSource={RelativeSource AncestorType={x:Type Window}, 
                                Mode=FindAncestor}, Mode=OneWay}" >
                                                    <i:InvokeCommandAction.CommandParameter>
                                                        <MultiBinding Converter="{StaticResource ListViewConverter}">
                                                            <Binding ElementName="SlotListView"/>
                                                            <Binding ElementName="SlotListView" Path="SelectedIndex"/>
                                                            <Binding ElementName="SlotListView" Path="SelectedItem"/>
                                                        </MultiBinding>
                                                    </i:InvokeCommandAction.CommandParameter>
                                                </i:InvokeCommandAction>
                                            </i:EventTrigger>


                                        </i:Interaction.Triggers>
                                        <ListView.ItemContainerStyle>
                                            <Style TargetType="ListViewItem">
                                                <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                                                <Setter Property="VerticalContentAlignment" Value="Stretch" />
                                                <Setter Property="IsEnabled" Value="{Binding IsEnableTransfer, Mode=TwoWay}"/>
                                                <!--<Setter Property="IsSelected" Value="{Binding DataContext.IsSelected,
                                RelativeSource={RelativeSource AncestorType={x:Type UserControl}, 
                                Mode=FindAncestor}, Mode=OneWay}"/>-->
                                            </Style>
                                        </ListView.ItemContainerStyle>
                                        <ListView.ItemsPanel>
                                            <ItemsPanelTemplate>
                                                <StackPanel Orientation="Vertical" />
                                                <!--<UniformGrid Columns="1"></UniformGrid>-->
                                                <!--<WrapPanel Orientation="Horizontal"></WrapPanel>-->
                                            </ItemsPanelTemplate>
                                        </ListView.ItemsPanel>
                                        <ListView.ItemTemplate>
                                            <DataTemplate>
                                                <Border  BorderThickness="1" Width="220">
                                                    <Border.BorderBrush>
                                                        <MultiBinding Converter="{StaticResource EnumGPLoaderWaferStatusTextColorConverter}">
                                                            <Binding Path="WaferStatus"/>
                                                            <Binding Path="WaferState"/>
                                                        </MultiBinding>
                                                    </Border.BorderBrush>
                                                    <Grid VerticalAlignment="Center">
                                                        <StackPanel Orientation="Horizontal">
                                                            <Label  HorizontalAlignment="Center" Content="{Binding Name}" FontSize="10" Foreground="White" Width="80" Height="22" Margin="1" />
                                                            <Label  HorizontalAlignment="Left" FontSize="9" Padding="6"   Width="120" Height="23" Margin="1" >
                                                                <Label.Foreground>
                                                                    <MultiBinding Converter="{StaticResource EnumGPLoaderWaferStatusTextColorConverter}">
                                                                        <Binding Path="WaferStatus"/>
                                                                        <Binding Path="WaferState"/>
                                                                    </MultiBinding>
                                                                </Label.Foreground>
                                                                <Label.Content>
                                                                    <MultiBinding Converter="{StaticResource EnumSlotTextConverter1}">
                                                                        <Binding Path="WaferStatus"/>
                                                                        <Binding Path="WaferState"/>
                                                                        <Binding Path="WaferObj"/>
                                                                    </MultiBinding>
                                                                </Label.Content>
                                                            </Label>
                                                        </StackPanel>
                                                    </Grid>
                                                </Border>
                                            </DataTemplate>
                                        </ListView.ItemTemplate>
                                    </ListView>
                                </Grid>
                            </Grid>
                        </Border>
                    </DataTemplate>
                </ListView.ItemTemplate>
            </ListView>
        </Grid>
        <Grid Grid.Column="1" Grid.Row="0" Grid.RowSpan="2">
            <Grid.RowDefinitions>
                <RowDefinition Height="3*"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
      
        <Grid Grid.Row="0" >
            <Grid.RowDefinitions>
                <RowDefinition Height="auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="auto"/>
                <RowDefinition Height="auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
                <Border BorderBrush="WhiteSmoke" BorderThickness="0.8" Grid.ColumnSpan="2" Grid.RowSpan="6" Margin="4"/>

                <Button AutomationProperties.AutomationId="btnSelectSlot"
                        Grid.Row='0' Margin="8" Content="Select SLOT" FontWeight="Bold" Height="48"  Command="{Binding TransferSourceClickCommand}">
                    <!--<Button.IsEnabled>
                    <MultiBinding Converter="{StaticResource GPHandlingBtnEnableConverter}">
                        <Binding Path="loaderModule.LoaderMaster.CurrentModuleState"/>
                        <Binding Path="SourceEnable"/>
                    </MultiBinding>
                </Button.IsEnabled>-->
                </Button>
                <StackPanel Grid.Row="5" >
                    <CheckBox AutomationProperties.AutomationId="cbOCREnable"
                              Margin="10,0,0,0" IsChecked="{Binding LoaderModule.GP_ManualOCREnable}" 
                              Foreground="White">OCR Enable</CheckBox>
                    <Button AutomationProperties.AutomationId="btnTransfer"
                            Content="Transfer" Margin="8,5,8,8"  FontWeight="Bold"  MinHeight="48" Command="{Binding TransferCommand}"/>
                </StackPanel>

            <Grid Grid.Row="1" Margin='4' >
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                    <RowDefinition/>
                </Grid.RowDefinitions>
                <Border BorderBrush="WhiteSmoke" BorderThickness="0.6" Margin="4" 
                            Grid.RowSpan="2">

                </Border>
                <Image HorizontalAlignment="Center" VerticalAlignment="Stretch" Margin="4" Width="96" Height="128" Grid.Row="0"
                               Source="{Binding TransferSource ,Converter={StaticResource ImageConverter}}">
                </Image>
                <Label Grid.Row="1" FontSize="12" Foreground="WhiteSmoke" Margin="4"
                           HorizontalAlignment="Center" VerticalAlignment="Center"
                           Content="{Binding TransferSource, Converter={StaticResource TransferObjectLabelConverter}}" 
                           Grid.Column="1"/>
            </Grid>

            <Label Grid.Row="2" Content="↓" FontSize="24" FontWeight="Bold" Foreground="WhiteSmoke" 
                           VerticalAlignment="Center" HorizontalAlignment="Center"/>
            <Grid Grid.Row='4' Margin='4'>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                    <RowDefinition/>
                </Grid.RowDefinitions>
                <Border BorderBrush="WhiteSmoke" BorderThickness="0.6" Margin="4" Grid.RowSpan="2">

                </Border>
                <Image HorizontalAlignment="Center" VerticalAlignment="Stretch" Margin="4" Width="96" Height="128" Grid.Row="0"
                               Source="{Binding TransferTarget ,Converter={StaticResource ImageConverter}}">
                </Image>
                <Label Grid.Row="1" FontSize="12" Foreground="WhiteSmoke" Margin="4"
                           HorizontalAlignment="Center" VerticalAlignment="Center"
                               Content="{Binding TransferTarget, Converter={StaticResource TransferObjectLabelConverter}}"/>
            </Grid>

        </Grid>
            <Grid Grid.Row="1">
                <Grid.RowDefinitions>
                    <RowDefinition Height="2*"/>
                </Grid.RowDefinitions>
                <GroupBox   Header="CST Operation" FontSize="13" Foreground="White" Background="Black"  BorderBrush="White" BorderThickness="1" Style="{DynamicResource GroupBoxForegroundStyle}" Margin="0,0,3,0">
                    <StackPanel>
                        <Button AutomationProperties.AutomationId="btnCSTLoad"
                                Grid.Column='0' Content="CST Load" Margin="5"  FontWeight="Bold" MinHeight="48" Command="{Binding CSTLoadCommand}">
                            <Button.IsEnabled>
                                <MultiBinding Converter="{StaticResource GPHandlingBtnEnableConverter}">
                                    <Binding Path="LoaderMaster.CurrentModuleState"/>
                                    <Binding Path="FoupLoadEnable"/>
                                </MultiBinding>
                            </Button.IsEnabled>
                        </Button>
                        <Button AutomationProperties.AutomationId="btnCSTUnload"
                                Grid.Column='0' Content="CST Unload" Margin="5"  FontWeight="Bold" MinHeight="48" Command="{Binding CSTUnloadCommand}">
                            <Button.IsEnabled>
                                <MultiBinding Converter="{StaticResource GPHandlingBtnEnableConverter}">
                                    <Binding Path="LoaderMaster.CurrentModuleState"/>
                                    <Binding Path="FoupUnloadEnable"/>
                                </MultiBinding>
                            </Button.IsEnabled>

                        </Button>
                        <Button AutomationProperties.AutomationId="btnCSTScan"
                                Grid.Column='0' Content="CST Scan" Margin="5"  FontWeight="Bold" MinHeight="48" Command="{Binding CSTScanCommand}">
                            <Button.IsEnabled>
                                <MultiBinding Converter="{StaticResource GPHandlingBtnEnableConverter}">
                                    <Binding Path="LoaderMaster.CurrentModuleState"/>
                                    <Binding Path="FoupScanEnable"/>
                                </MultiBinding>
                            </Button.IsEnabled>
                        </Button>
                    </StackPanel>
                </GroupBox>
                <!--<GroupBox  Grid.Row="1"  Header="Align Option" FontSize="13" Foreground="White" Background="Black"  BorderBrush="White" BorderThickness="1" Style="{DynamicResource GroupBoxForegroundStyle}" Margin="0,0,3,0">
                    <StackPanel>
                        <CheckBox Margin="5"  Foreground="White" Background="White" IsEnabled="{Binding IsEnableWaferAlign}" IsChecked="{Binding IsCheckWaferAlign ,Mode=TwoWay}"  FontSize="15">Wafer Align</CheckBox>
                        <CheckBox Margin="5"  Foreground="White" Background="White" IsEnabled="{Binding IsEnablePinAlign}" IsChecked="{Binding IsCheckPinAlign ,Mode=TwoWay}"  FontSize="15">Pin Align</CheckBox>
                    </StackPanel>
                </GroupBox>-->
            </Grid>
        </Grid>
    </Grid>
</Controls:MetroWindow>
