<dialogs:CustomDialog x:Class="UserCoordAdvanceSetup.View.UserCoordStandardAdvanceSetupView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:UserCoordAdvanceSetup.View"
             xmlns:dialogs="clr-namespace:MahApps.Metro.Controls.Dialogs;assembly=MahApps.Metro"
             xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"
             mc:Ignorable="d">
    <Grid>
        <Grid.Resources>
            <ResourceDictionary>

                <Style x:Key="DefaultTextBox" TargetType="TextBox" BasedOn="{StaticResource MaterialDesignTextBox}" >
                    <Setter Property="Foreground" Value="Black"/>
                    <Setter Property="TextAlignment" Value="Center"/>
                    <Setter Property="Validation.ErrorTemplate">
                        <Setter.Value>
                            <ControlTemplate>
                                <DockPanel LastChildFill="true">
                                    <StackPanel Orientation="Horizontal" DockPanel.Dock="Bottom" Margin="5,0,0,0">
                                        <Border Background="Red" DockPanel.Dock="Bottom" Margin="0,0,0,0" Width="20" Height="16" CornerRadius="10">
                                            <TextBlock Text="!" VerticalAlignment="center" HorizontalAlignment="center" FontWeight="Bold" Foreground="white">
                                            </TextBlock>
                                        </Border>
                                        <Border Background="Transparent" DockPanel.Dock="Bottom" Margin="3,0,0,0" Height="16" >
                                            <TextBlock Text="{Binding ElementName=customAdorner, Path=AdornedElement.(Validation.Errors)[0].ErrorContent}" 
                                                   VerticalAlignment="center" HorizontalAlignment="Left" FontWeight="Bold" Foreground="Red">
                                            </TextBlock>
                                        </Border>
                                    </StackPanel>

                                    <AdornedElementPlaceholder Name="customAdorner" VerticalAlignment="Center" >
                                        <Border BorderBrush="red" BorderThickness="1" />
                                    </AdornedElementPlaceholder>
                                </DockPanel>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                    <Setter Property="BorderThickness" Value="1"/>
                    <Setter Property="BorderBrush" Value="Black"/>
                    <Setter Property="Padding" Value="0,0,0,0"/>
                    <Setter Property="Margin" Value="0,0,0,16"/>
                </Style>

                <Style x:Key="ContentTextBox" TargetType="TextBox">
                    <Setter Property="Margin" Value="4"/>
                    <Setter Property="Foreground" Value="Black"/>
                    <Setter Property="TextAlignment" Value="Center"/>
                    <Setter Property="FontSize" Value="18" />
                </Style>
            </ResourceDictionary>
        </Grid.Resources>
        
        <Grid.RowDefinitions>
            <RowDefinition Height="1*"/>
            <RowDefinition Height="3*"/>
            <RowDefinition Height="1*"/>
        </Grid.RowDefinitions>
        
        <Label Grid.Row="0" Content="Input the 'User Coordinate' you want to set. " Foreground="Black" FontWeight="DemiBold"/>
        
        <Grid Grid.Row="1" >

            <TabControl TabIndex="{Binding TabIndex}">
                <TabItem Header="Standard" HorizontalAlignment="Right" Margin="-2,-2,-2.2,-0.2" Width="120">
                    <StackPanel>
                        <Grid Margin="0,4,0,4">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition/>
                                <ColumnDefinition/>
                            </Grid.ColumnDefinitions>
                            <Label Grid.Row="0" Content="Cur Machine X Coord : " HorizontalAlignment="Right" VerticalAlignment="Center" FontSize="18" Foreground="Black"/>
                            <Label Grid.Row="1" Grid.Column="1" Style="{DynamicResource ContentBorderLabel}" Content="{Binding Wafer.CurrentMXIndex}" HorizontalContentAlignment="Center" VerticalAlignment="Center" FontSize="18"/>
                        </Grid>
                        <Grid Margin="0,4,0,4">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition/>
                                <ColumnDefinition/>
                            </Grid.ColumnDefinitions>
                            <Label Grid.Row="0" Content="Cur Machine Y Coord : " HorizontalAlignment="Right" VerticalAlignment="Center" FontSize="18" Foreground="Black"/>
                            <Label Grid.Row="1" Grid.Column="1" Style="{DynamicResource ContentBorderLabel}" Content="{Binding Wafer.CurrentMYIndex}" HorizontalContentAlignment="Center" VerticalAlignment="Center" FontSize="18"/>
                        </Grid>
                        <Grid Margin="0,4,0,4">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition/>
                                <ColumnDefinition/>
                            </Grid.ColumnDefinitions>
                            <Label Grid.Row="0" Content="Machine X Coord : " HorizontalAlignment="Right" VerticalAlignment="Center" FontSize="18" Foreground="Black"/>
                            <Label Grid.Row="1" Grid.Column="1" Style="{DynamicResource ContentBorderLabel}" Content="{Binding MachineCoordX}" HorizontalContentAlignment="Center" VerticalAlignment="Center" FontSize="18"/>
                        </Grid>
                        <Grid Margin="0,4,0,4">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition/>
                                <ColumnDefinition/>
                            </Grid.ColumnDefinitions>
                            <Label Grid.Row="0" Content="Machine Y Coord : " HorizontalAlignment="Right" VerticalAlignment="Center" FontSize="18" Foreground="Black"/>
                            <Label Grid.Row="1" Grid.Column="1" Style="{DynamicResource ContentBorderLabel}" Content="{Binding MachineCoordY}" HorizontalContentAlignment="Center" VerticalAlignment="Center" FontSize="18"/>
                        </Grid>
                        <Grid Margin="0,4,0,4">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition/>
                                <ColumnDefinition/>
                            </Grid.ColumnDefinitions>
                            <Label Grid.Row="0" Content="User X Coord : " HorizontalAlignment="Right" VerticalAlignment="Center" FontSize="18" Foreground="Black"/>
                            <TextBox Grid.Row="0" Grid.Column="1" Style="{StaticResource ContentTextBox}" VerticalAlignment="Center" 
                         Text="{Binding UserCoordX}">

                                <i:Interaction.Triggers>
                                    <i:EventTrigger EventName="PreviewMouseDown" >
                                        <i:InvokeCommandAction Command="{Binding TextBoxClickCommand}"
                                                   CommandParameter="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type TextBox}}}"/>
                                    </i:EventTrigger>
                                </i:Interaction.Triggers>
                            </TextBox>
                        </Grid>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition/>
                                <ColumnDefinition/>
                            </Grid.ColumnDefinitions>
                            <Label Grid.Row="1" Content="User Y Coord : " HorizontalAlignment="Right" VerticalAlignment="Center" FontSize="18" Foreground="Black"/>
                            <TextBox Grid.Row="1" Grid.Column="1" Style="{StaticResource ContentTextBox}" VerticalAlignment="Center"
                         Text="{Binding UserCoordY}">
                                <i:Interaction.Triggers>
                                    <i:EventTrigger EventName="PreviewMouseDown" >
                                        <i:InvokeCommandAction Command="{Binding TextBoxClickCommand}"
                                                   CommandParameter="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type TextBox}}}"/>
                                    </i:EventTrigger>
                                </i:Interaction.Triggers>
                            </TextBox>
                        </Grid>
                        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right">
                            <Button  Content="OK" Margin="4" FontSize="15" Command="{Binding StandardCmdOKClick}" Width="80" HorizontalAlignment="Right" />
                            <Button  Content="CANCEL" Margin="4" FontSize="15" Command="{Binding CmdCancelClick}" Width="80" HorizontalAlignment="Right" />
                        </StackPanel>
                    </StackPanel>
                </TabItem>

                <TabItem Header="Advanced">

                    <StackPanel>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition/>
                                <ColumnDefinition/>
                            </Grid.ColumnDefinitions>
                            <Label Grid.Row="1" Content="Ref X Coord : " HorizontalAlignment="Right" VerticalAlignment="Center" FontSize="18" Foreground="Black"/>
                            <TextBox Grid.Row="1" Grid.Column="1" Style="{StaticResource ContentTextBox}" VerticalAlignment="Center"
                         Text="{Binding RefCoordX}">
                                <i:Interaction.Triggers>
                                    <i:EventTrigger EventName="PreviewMouseDown" >
                                        <i:InvokeCommandAction Command="{Binding TextBoxClickCommand}"
                                                   CommandParameter="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type TextBox}}}"/>
                                    </i:EventTrigger>
                                </i:Interaction.Triggers>
                            </TextBox>
                        </Grid>

                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition />
                                <ColumnDefinition/>
                            </Grid.ColumnDefinitions>
                            <Label Grid.Row="1" Content="Ref Y Coord : " HorizontalAlignment="Right" VerticalAlignment="Center" FontSize="18" Foreground="Black"/>
                            <TextBox Grid.Row="1" Grid.Column="1" Style="{StaticResource ContentTextBox}" VerticalAlignment="Center"
                         Text="{Binding RefCoordY}">
                                <i:Interaction.Triggers>
                                    <i:EventTrigger EventName="PreviewMouseDown" >
                                        <i:InvokeCommandAction Command="{Binding TextBoxClickCommand}"
                                                   CommandParameter="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type TextBox}}}"/>
                                    </i:EventTrigger>
                                </i:Interaction.Triggers>
                            </TextBox>
                        </Grid>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition/>
                                <ColumnDefinition/>
                            </Grid.ColumnDefinitions>
                            <Label Grid.Row="1" Content="Cen X Coord : " HorizontalAlignment="Right" VerticalAlignment="Center" FontSize="18" Foreground="Black"/>
                            <TextBox Grid.Row="1" Grid.Column="1" Style="{StaticResource ContentTextBox}" VerticalAlignment="Center"
                         Text="{Binding CendieX}">
                                <i:Interaction.Triggers>
                                    <i:EventTrigger EventName="PreviewMouseDown" >
                                        <i:InvokeCommandAction Command="{Binding TextBoxClickCommand}"
                                                   CommandParameter="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type TextBox}}}"/>
                                    </i:EventTrigger>
                                </i:Interaction.Triggers>
                            </TextBox>
                        </Grid>

                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition/>
                                <ColumnDefinition/>
                            </Grid.ColumnDefinitions>
                            <Label Grid.Row="1" Content="Cen Y Coord : " HorizontalAlignment="Right" VerticalAlignment="Center" FontSize="18" Foreground="Black"/>
                            <TextBox Grid.Row="1" Grid.Column="1" Style="{StaticResource ContentTextBox}" VerticalAlignment="Center"
                         Text="{Binding CendieY}">
                                <i:Interaction.Triggers>
                                    <i:EventTrigger EventName="PreviewMouseDown" >
                                        <i:InvokeCommandAction Command="{Binding TextBoxClickCommand}"
                                                   CommandParameter="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type TextBox}}}"/>
                                    </i:EventTrigger>
                                </i:Interaction.Triggers>
                            </TextBox>
                        </Grid>

                        <Grid>

                            <Grid.RowDefinitions>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>

                            <Grid Grid.Row="0">

                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                    <Label Content="Target dies" HorizontalAlignment="Right" VerticalAlignment="Center" FontSize="18" Foreground="Black" Margin="10"/>
                                    <Button Content="Add" Command="{Binding AddTargetDieCommand}" FontSize="18" Foreground="Black" Width="45" Margin="10"/>
                                    <Button Content="Del" Command="{Binding DeleteTargetDieCommand}" FontSize="18" Foreground="Black" Width="45" Margin="10"/>
                                </StackPanel>

                            </Grid>

                            <Grid Grid.Row="1">

                                <!--MaxHeight="200"
                                              ScrollViewer.CanContentScroll="False" 
                                              ScrollViewer.VerticalScrollBarVisibility="Visible"
                                              VerticalContentAlignment="Top"-->


                                <ListView ItemsSource="{Binding TargetUs}" SelectedItem="{Binding SelectedTargetU}" Width="Auto" HorizontalAlignment="Center">

                                    <ListView.Resources>

                                        <Style TargetType="{x:Type ListViewItem}">
                                            <Style.Triggers>
                                                <Trigger Property="IsSelected" Value="true" >
                                                    <Setter Property="Foreground" Value="Black" />
                                                    <Setter Property="Background" Value="Lime" />
                                                </Trigger>
                                            </Style.Triggers>
                                        </Style>

                                        <!--<Style TargetType="ListViewItem">
                                                <Style.Triggers>
                                                    <MultiTrigger>
                                                        <MultiTrigger.Conditions>
                                                            <Condition Property="IsSelected" Value="true" />
                                                            <Condition Property="Selector.IsSelectionActive" Value="true" />
                                                        </MultiTrigger.Conditions>
                                                        <Setter Property="Background" Value="LimeGreen" />
                                                        <Setter Property="Template" Value="{StaticResource SelectedTemplate}" />
                                                    </MultiTrigger>
                                                </Style.Triggers>
                                            </Style>-->
                                    </ListView.Resources>

                                    <ListView.ItemTemplate>
                                        <DataTemplate>

                                            <Border BorderThickness="1" BorderBrush="Black">
                                                <Grid>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="Auto"/>
                                                        <ColumnDefinition Width="Auto"/>
                                                        <ColumnDefinition Width="Auto"/>
                                                        <ColumnDefinition Width="Auto"/>
                                                    </Grid.ColumnDefinitions>

                                                    <Grid Grid.Column="0">
                                                        <Label Content="X : " HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="18" Foreground="Black" MinWidth="40"/>
                                                    </Grid>

                                                    <Grid Grid.Column="1">
                                                        <TextBox Style="{StaticResource ContentTextBox}" VerticalAlignment="Center" Text="{Binding TargetDie.XIndex.Value}" MinWidth="150">
                                                            <i:Interaction.Triggers>
                                                                <i:EventTrigger EventName="PreviewMouseDown" >
                                                                    <i:InvokeCommandAction Command="{Binding TextBoxClickCommand}" 
                                                                                CommandParameter="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type TextBox}}}"/>
                                                                </i:EventTrigger>
                                                            </i:Interaction.Triggers>
                                                        </TextBox>
                                                    </Grid>

                                                    <Grid Grid.Column="2">
                                                        <Label Content="Y : " HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="18" Foreground="Black" MinWidth="40"/>
                                                    </Grid>

                                                    <Grid Grid.Column="3">
                                                        <TextBox Style="{StaticResource ContentTextBox}" VerticalAlignment="Center" Text="{Binding TargetDie.YIndex.Value}" MinWidth="150">
                                                            <i:Interaction.Triggers>
                                                                <i:EventTrigger EventName="PreviewMouseDown" >
                                                                    <i:InvokeCommandAction Command="{Binding TextBoxClickCommand}" 
                                                                                CommandParameter="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type TextBox}}}"/>
                                                                </i:EventTrigger>
                                                            </i:Interaction.Triggers>
                                                        </TextBox>
                                                    </Grid>
                                                </Grid>
                                            </Border>

                                        </DataTemplate>
                                    </ListView.ItemTemplate>

                                </ListView>


                            </Grid>


                        </Grid>
                        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right">
                            <Button  Content="OK" Margin="4" FontSize="15" Command="{Binding AdvancedCmdOKClick}" Width="80" HorizontalAlignment="Right" />
                            <Button  Content="CANCEL" Margin="4" FontSize="15" Command="{Binding CmdCancelClick}" Width="80" HorizontalAlignment="Right" />
                        </StackPanel>
                    </StackPanel>

                </TabItem>
                
            </TabControl>
        </Grid>
        <!--<StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right">
            <Button  Content="OK" Margin="4" FontSize="15" Command="{Binding CmdOKClick}" Width="80" HorizontalAlignment="Right" />
            <Button  Content="CANCEL" Margin="4" FontSize="15" Command="{Binding CmdCancelClick}" Width="80" HorizontalAlignment="Right" />
        </StackPanel>-->
    </Grid>
</dialogs:CustomDialog>
