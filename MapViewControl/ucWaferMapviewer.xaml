<UserControl x:Class="MapView.ucWaferMapviewer"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
             xmlns:ValueConvert="clr-namespace:ValueConverters;assembly=ValueConverters"   
             xmlns:local="clr-namespace:MapView" x:Name="ucwindow"
             mc:Ignorable="d"  d:DesignHeight="960" d:DesignWidth="960" Background="Transparent">
    <UserControl.Resources>
        <ValueConvert:BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter" True="Collapsed" False="Visible"/>
    </UserControl.Resources>
    <Grid   MinHeight="200" MinWidth="200" >
        <!--ZoomLevel="{Binding ZoomLevel, Mode=TwoWay}"-->
        <local:MapViewControl x:Name="ucMapViewControl" 
                    WaferObject="{Binding WaferObject,
                    UpdateSourceTrigger=PropertyChanged,
                    RelativeSource={RelativeSource AncestorType={x:Type UserControl}, 
                    Mode=FindAncestor}}"
                    UnderDutDices="{Binding UnderDutDices,
                    RelativeSource={RelativeSource AncestorType={x:Type UserControl}, 
                    Mode=FindAncestor}}"      
                    CursorXIndex="{Binding CursorXIndex,
                    UpdateSourceTrigger=PropertyChanged,
                    Mode=TwoWay, 
                    RelativeSource={RelativeSource AncestorType={x:Type UserControl},
                    Mode=FindAncestor}}" 
                    CursorYIndex="{Binding CursorYIndex,
                    UpdateSourceTrigger=PropertyChanged,
                    Mode=TwoWay, RelativeSource={RelativeSource AncestorType={x:Type UserControl},
                    Mode=FindAncestor}}"
                    CurrXYIndex="{Binding CurrXYIndex, UpdateSourceTrigger=PropertyChanged,
                    Mode=TwoWay, RelativeSource={RelativeSource AncestorType={x:Type UserControl},
                    Mode=FindAncestor}}"
                    SelectedXIndex="{Binding SelectedXIndex,
                    Mode=TwoWay, 
                    RelativeSource={RelativeSource AncestorType={x:Type UserControl},
                    Mode=FindAncestor}}" 
                    SelectedYIndex="{Binding SelectedYIndex,
                    Mode=TwoWay, RelativeSource={RelativeSource AncestorType={x:Type UserControl},
                    Mode=FindAncestor}}"
                    LoaderCommunicationManager="{Binding LoaderCommunicationManager, 
                    RelativeSource={RelativeSource AncestorType={x:Type UserControl}, 
                    Mode=FindAncestor}}"
                    CurCamera="{Binding CurCamera, Mode=OneWay, 
                    RelativeSource={RelativeSource AncestorType={x:Type UserControl},
                    Mode=FindAncestor}}" 
                    CoordinateManager="{Binding CoordinateManager, 
                    RelativeSource={RelativeSource AncestorType={x:Type UserControl}, 
                    Mode=FindAncestor}}"
                    EnalbeClickToMove="{Binding EnalbeClickToMove, 
                    RelativeSource={RelativeSource AncestorType={x:Type UserControl}, 
                    Mode=FindAncestor}}"
                    RenderMode="{Binding RenderMode, 
                    RelativeSource={RelativeSource AncestorType={x:Type UserControl}, 
                    Mode=FindAncestor}}"
                    StageSyncEnalbe="{Binding StageSyncEnalbe, 
                    RelativeSource={RelativeSource AncestorType={x:Type UserControl}, 
                    Mode=FindAncestor}}"
                    StepLabel="{Binding StepLabel, 
                    RelativeSource={RelativeSource AncestorType={x:Type UserControl}, 
                    Mode=FindAncestor}}"
                    IsCrossLineVisible="{Binding IsCrossLineVisible, 
                    RelativeSource={RelativeSource AncestorType={x:Type UserControl}, 
                    Mode=FindAncestor}}"
                    MapViewEncoderVisiability="{Binding MapViewEncoderVisiability, 
                    RelativeSource={RelativeSource AncestorType={x:Type UserControl}, 
                    Mode=FindAncestor}}"
                    HighlightDies="{Binding HighlightDies, 
                    RelativeSource={RelativeSource AncestorType={x:Type UserControl}, 
                    Mode=FindAncestor}}"
                    BINType="{Binding BINType, 
                    RelativeSource={RelativeSource AncestorType={x:Type UserControl}, 
                    Mode=FindAncestor}}"
                    >
        </local:MapViewControl>

        <Grid Visibility="{Binding ZoomLevelVisibility, RelativeSource={RelativeSource AncestorType={x:Type UserControl}, Mode=FindAncestor}}">

            <RepeatButton AutomationProperties.AutomationId="WaferMapZoomInBtn"
                          Margin="0,0,10,76" Grid.Row="2" Width="48" Height="48" Background="Black" Foreground="White"
                          VerticalAlignment="Bottom" HorizontalAlignment="Right" Opacity="0.2"
                          Command="{Binding CmdZoomInButton, ElementName=ucMapViewControl}" >
                <RepeatButton.Content>
                    <Grid Margin="0,0,0,0">
                        <materialDesign:PackIcon Height="32" Width="32">
                            <materialDesign:PackIcon.Style>
                                <Style  TargetType="materialDesign:PackIcon" BasedOn="{StaticResource {x:Type materialDesign:PackIcon}}">
                                    <Setter Property="Kind" Value="Plus" />
                                </Style>
                            </materialDesign:PackIcon.Style>
                        </materialDesign:PackIcon>
                    </Grid>
                </RepeatButton.Content>
            </RepeatButton>

            <RepeatButton AutomationProperties.AutomationId="WaferMapZoomOutBtn"
                          Margin="0,0,10,14" Grid.Row="3" Width="48" Height="48" Background="Black" Foreground="White"
                          VerticalAlignment="Bottom" HorizontalAlignment="Right" Opacity="0.2"
                          Command="{Binding CmdZoomOutButton, ElementName=ucMapViewControl}" >
                <RepeatButton.Content>
                    <Grid Margin="0,0,0,0">
                        <materialDesign:PackIcon Height="32" Width="32">
                            <materialDesign:PackIcon.Style>
                                <Style  TargetType="materialDesign:PackIcon" BasedOn="{StaticResource {x:Type materialDesign:PackIcon}}">
                                    <Setter Property="Kind" Value="Minus" />
                                </Style>
                            </materialDesign:PackIcon.Style>
                        </materialDesign:PackIcon>
                    </Grid>
                </RepeatButton.Content>
            </RepeatButton>
            
        </Grid>


        <Viewbox x:Name="vb_lockimg" Width="48" Height="48" VerticalAlignment="Top" HorizontalAlignment="Center" 
                     Visibility="{Binding Path = IsEnabled, ElementName=ucwindow, Converter={StaticResource BooleanToVisibilityConverter}}" Margin="96,0,77.29,0">
            <Canvas Width="24" Height="24">
                <Canvas.Effect>
                    <DropShadowEffect Color="Green" Direction="90" Opacity="1" BlurRadius="2" ShadowDepth ="3"></DropShadowEffect>
                </Canvas.Effect>
                <Path Data="M12,17A2,2 0 0,0 14,15C14,13.89 13.1,13 12,13A2,2 0 0,0 10,15A2,2 0 0,0 12,17M18,8A2,2 0 0,1 20,10V20A2,2 0 0,1 18,22H6A2,2 0 0,1 4,20V10C4,8.89 4.9,8 6,8H7V6A5,5 0 0,1 12,1A5,5 0 0,1 17,6V8H18M12,3A3,3 0 0,0 9,6V8H15V6A3,3 0 0,0 12,3Z" 
                          Fill="#FEBE38">
                </Path>
            </Canvas>
        </Viewbox>

    </Grid>
</UserControl>
