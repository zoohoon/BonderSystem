<UserControl x:Class="ProberViewModel.PMIViewerPage" 
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:MapUC="clr-namespace:MapView;assembly=MapView"
             xmlns:pnpcontrol="clr-namespace:PnPControl;assembly=PnPControl"
             xmlns:prober="clr-namespace:ProberInterfaces;assembly=ProberInterfaces"
             xmlns:ValueConvert="clr-namespace:ValueConverters;assembly=ValueConverters"
             xmlns:hjc="clr-namespace:HexagonJogControl;assembly=HexagonJogControl"
             xmlns:lj="clr-namespace:LightJog;assembly=LightJog"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
             xmlns:local="clr-namespace:ProberViewModel"
             xmlns:cui="clr-namespace:CUI;assembly=CUI"
             xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"
             xmlns:pi="clr-namespace:ProberInterfaces.PMI;assembly=ProberInterfaces"
             xmlns:System="clr-namespace:System;assembly=mscorlib"
             xmlns:Behaviors="clr-namespace:ProberViewModel"
             xmlns:ctrl="clr-namespace:Itenso.Windows.Controls.ListViewLayout;assembly=Itenso.Windows.Controls.ListViewLayout"
             mc:Ignorable="d" 
             d:DesignHeight="892" d:DesignWidth="1280">
    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Colors.xaml" />
                <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Fonts.xaml" />
                <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Themes/Thumb.xaml" />
                <ResourceDictionary Source="/SettingControlStyle;component/SettingViewStyleDictionaly.xaml" />
                <ResourceDictionary Source="pack://application:,,,/MaterialDesignThemes.Wpf;component/Themes/MaterialDesignTheme.Slider.xaml" />
            </ResourceDictionary.MergedDictionaries>

            <ObjectDataProvider x:Key="getDataFromPadStatusResultEnum" MethodName="GetValues" ObjectType="{x:Type System:Enum}">
                <ObjectDataProvider.MethodParameters>
                    <x:Type TypeName="pi:PadStatusResultEnum"/>
                </ObjectDataProvider.MethodParameters>
            </ObjectDataProvider>

            <ValueConvert:SetupStateImageConvert x:Key="SetupImageConverter"/>
            <ValueConvert:TreeviewItemVisibleConverter x:Key="TreeItemVisibleConverter"/>
            <ValueConvert:IsSetupTypeConverter x:Key="IsSetupTypeToBoolConv"/>
            <ValueConvert:InspectionSetFromBtnColorCon x:Key="SetFromButtonColConv"/>
            <ValueConvert:ToggleColorCon x:Key="ToggleColorConv"/>
            <ValueConvert:InspectionSetIndexConverter x:Key="InspectionSetIndexConv"/>
            <ValueConvert:IntToStringPlusOneConverter x:Key="PlusOneConv"/>

            <local:PMIUserIndexToStringConverter x:Key="PMIUserIndexToStringConv"/>
            <local:IndexConverter x:Key="IndexConv"/>
            <local:UserIndexToStringConverter x:Key="UserIndexToStringConv"/>
            <local:PadStatusCodeEnumToStringConverter x:Key="PadStatusCodeEnumToStringConv"/>

            <!--<local:MarkStatusToBackgroundConverter x:Key="MarkStatusToBackground_PASS_Conv" MatchedStatusCode="PASS"/>
            <local:MarkStatusToBackgroundConverter x:Key="MarkStatusToBackground_MARK_AREA_TOO_BIG_Conv" MatchedStatusCode="MARK_AREA_TOO_BIG"/>
            <local:MarkStatusToBackgroundConverter x:Key="MarkStatusToBackground_MARK_AREA_TOO_SMALL_Conv" MatchedStatusCode="MARK_AREA_TOO_SMALL"/>
            <local:MarkStatusToBackgroundConverter x:Key="MarkStatusToBackground_MARK_SIZE_TOO_BIG_Conv" MatchedStatusCode="MARK_SIZE_TOO_BIG"/>
            <local:MarkStatusToBackgroundConverter x:Key="MarkStatusToBackground_MARK_SIZE_TOO_SMALL_Conv" MatchedStatusCode="MARK_SIZE_TOO_SMALL"/>
            <local:MarkStatusToBackgroundConverter x:Key="MarkStatusToBackground_TOO_CLOSE_TO_EDGE_Conv" MatchedStatusCode="TOO_CLOSE_TO_EDGE"/>-->

            <local:MarkStatusToBackgroundMultiConverter x:Key="MarkStatusToBackgroundMultiConv_PASS_Conv" MatchedStatusCode="PASS"/>
            <local:MarkStatusToBackgroundMultiConverter x:Key="MarkStatusToBackgroundMultiConv_MARK_AREA_TOO_BIG_Conv" MatchedStatusCode="MARK_AREA_TOO_BIG"/>
            <local:MarkStatusToBackgroundMultiConverter x:Key="MarkStatusToBackgroundMultiConv_MARK_AREA_TOO_SMALL_Conv" MatchedStatusCode="MARK_AREA_TOO_SMALL"/>
            <local:MarkStatusToBackgroundMultiConverter x:Key="MarkStatusToBackgroundMultiConv_MARK_SIZE_TOO_BIG_Conv" MatchedStatusCode="MARK_SIZE_TOO_BIG"/>
            <local:MarkStatusToBackgroundMultiConverter x:Key="MarkStatusToBackgroundMultiConv_MARK_SIZE_TOO_SMALL_Conv" MatchedStatusCode="MARK_SIZE_TOO_SMALL"/>
            <local:MarkStatusToBackgroundMultiConverter x:Key="MarkStatusToBackgroundMultiConv_TOO_CLOSE_TO_EDGE_Conv" MatchedStatusCode="TOO_CLOSE_TO_EDGE"/>

            <local:PadStatusToBackgroundMultiConverter x:Key="PadStatusToBackgroundMultiConv_NO_PROBE_MARK_Conv" MatchedStatusCode="NO_PROBE_MARK"/>
            <local:PadStatusToBackgroundMultiConverter x:Key="PadStatusToBackgroundMultiConv_TOO_MANY_PROBE_MARK_Conv" MatchedStatusCode="TOO_MANY_PROBE_MARK"/>

            <local:PadIndexToStringConverter x:Key="PadIndexToStringConv"/>
            <local:MarkIndexToStringConverter x:Key="MarkIndexToStringConv"/>
            <local:PMIImageInfoToStringConverter x:Key="PMIImageInfoToStringConv"/>
            <local:PadStatusToForegroundConverter x:Key="PadStatusToForegroundConv"/>

            <Style x:Key="DefaultBtn" TargetType="Button">
                <Setter Property="OverridesDefaultStyle" Value="True" />
                <Setter Property="Cursor" Value="Hand" />
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="Button">
                            <Border Name="border" BorderThickness="0" BorderBrush="Black" Background="{TemplateBinding Background}">
                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Opacity" Value="0.8" />
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <Storyboard AutoReverse="True" RepeatBehavior="Forever" x:Key="FlashingButtonSB">
                <ColorAnimationUsingKeyFrames Storyboard.TargetProperty="(Panel.Background).(SolidColorBrush.Color)" >
                    <EasingColorKeyFrame KeyTime="0" Value="#FFDDDDDD"/>
                    <EasingColorKeyFrame KeyTime="0:0:0.5" Value="#FF1D1D1D">
                        <EasingColorKeyFrame.EasingFunction>
                            <QuinticEase EasingMode="EaseInOut"/>
                        </EasingColorKeyFrame.EasingFunction>
                    </EasingColorKeyFrame>
                </ColorAnimationUsingKeyFrames>
            </Storyboard>

            <Style x:Key="ItemsStyle" TargetType="{x:Type ListViewItem}">
                <Setter Property="Height" Value="40" />
                <Setter Property="Margin" Value="2" />
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate>

                            <DockPanel LastChildFill="True" Background="Aquamarine">
                                <Viewbox VerticalAlignment="Stretch">
                                    <Image DockPanel.Dock="Left"/>
                                </Viewbox>
                            </DockPanel>

                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

        </ResourceDictionary>
    </UserControl.Resources>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="640*"/>
            <ColumnDefinition Width="375*"/>
        </Grid.ColumnDefinitions>

        <Grid Grid.Column="0">

            <Grid.RowDefinitions>
                <RowDefinition Height="8.8*"/>
                <RowDefinition Height="1.3*"/>
            </Grid.RowDefinitions>

            <Border Grid.Row="0" BorderBrush="White" BorderThickness="1">
                <Grid >
                    <Image Source="{Binding SelectedImageItem.InterestImage.Source}" UseLayoutRounding="True" Stretch="Uniform"/>
                </Grid>
            </Border>

            <Border Grid.Row="1" BorderBrush="White" BorderThickness="1" Visibility="{Binding ImageInfoGroupboxVisibility}">
                <GroupBox Foreground="White" FontSize="14" Header="{Binding SelectedImageItem, Converter={StaticResource PMIImageInfoToStringConv}}">

                    <Grid>
                        <Grid>

                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="4*"/>
                                <ColumnDefinition Width="2*"/>
                                <ColumnDefinition Width="2*"/>
                                <ColumnDefinition Width="2*"/>
                                <ColumnDefinition Width="4*"/>
                            </Grid.ColumnDefinitions>

                            <Grid Grid.Column="0">
                                <Button AutomationProperties.AutomationId="btnImagePrev"
                                        Width="60" Height="48" VerticalAlignment="Center" Margin="0,5"
                                        Command="{Binding ChangeFilteredImageIndexCommnad}" 
                                        CommandParameter="{x:Static pi:SELECT_DIRECTION.PREV}">
                                    <Viewbox Width="48" Height="48">
                                        <Canvas Width="24" Height="24">
                                            <Path Fill="Black" Data="M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z" />
                                        </Canvas>
                                    </Viewbox>
                                </Button>
                            </Grid>

                            <Grid Grid.Column="1">
                                <Label Content="{Binding SelectedImageItemIndex, Converter={StaticResource PlusOneConv}, ConverterParameter=plusOne}"
                               Foreground="White"
                               VerticalAlignment="Center"
                               HorizontalAlignment="Center"
                               FontSize="14"/>
                            </Grid>

                            <Grid Grid.Column="2">
                                <Label Content="/"
                               Foreground="White"
                               VerticalAlignment="Center"
                               HorizontalAlignment="Center"
                               FontSize="14"/>
                            </Grid>

                            <Grid Grid.Column="3">
                                <Label Content="{Binding FilteredPMIImageInfolist.Count}"
                               Foreground="White"
                               VerticalAlignment="Center"
                               HorizontalAlignment="Center"
                               FontSize="14"/>
                            </Grid>


                            <Grid Grid.Column="4">

                                <Button AutomationProperties.AutomationId="btnImageNext"
                                        Width="60" Height="48" VerticalAlignment="Center" Margin="0,5"
                                        Command="{Binding ChangeFilteredImageIndexCommnad}" 
                                        CommandParameter="{x:Static pi:SELECT_DIRECTION.NEXT}">
                                    <Viewbox Width="48" Height="48">
                                        <Canvas Width="24" Height="24">
                                            <Path Fill="Black" Data="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" />
                                        </Canvas>
                                    </Viewbox>
                                </Button>

                                <!--<Button Width="60" Height="60" VerticalAlignment="Center" Margin="0,5" Click="OnScrollDown">
                                    <Viewbox Width="48" Height="48">
                                        <Canvas Width="24" Height="24">
                                            <Path Fill="Black" Data="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" />
                                        </Canvas>
                                    </Viewbox>
                                </Button>-->

                            </Grid>

                            <!--<Grid.ColumnDefinitions>
                                <ColumnDefinition/>
                                <ColumnDefinition/>
                            </Grid.ColumnDefinitions>-->

                            <!--<Grid Grid.Column="0">
                                <Button Width="60" Height="48" VerticalAlignment="Center" Margin="0,5"
                                                                                    Command="{Binding ChangeFilteredImageIndexCommnad}" 
                                                                                    CommandParameter="{x:Static pi:SELECT_DIRECTION.PREV}">
                                    <Viewbox Width="48" Height="48">
                                        <Canvas Width="24" Height="24">
                                            <Path Fill="Black" Data="M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z" />
                                        </Canvas>
                                    </Viewbox>
                                </Button>
                            </Grid>

                            <Grid Grid.Column="1">
                                <Button Width="60" Height="48" VerticalAlignment="Center" Margin="0,5"
                                                                                    Command="{Binding ChangeFilteredImageIndexCommnad}" 
                                                                                    CommandParameter="{x:Static pi:SELECT_DIRECTION.NEXT}">
                                    <Viewbox Width="48" Height="48">
                                        <Canvas Width="24" Height="24">
                                            <Path Fill="Black" Data="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" />
                                        </Canvas>
                                    </Viewbox>
                                </Button>
                            </Grid>-->
                        </Grid>

                    </Grid>

                </GroupBox>
            </Border>

        </Grid>

        <Grid Grid.Column="1">

            <Border BorderThickness="1.5" BorderBrush="White" Grid.Row="0">

                <TabControl Background="Black" SelectedIndex="{Binding ActiveTabItemIndex}">

                    <TabItem AutomationProperties.AutomationId="tiFilter"
                             Header="Filter">

                        <Grid ShowGridLines="false">

                            <Grid.RowDefinitions>
                                <RowDefinition Height="1.5*"/>
                                <RowDefinition Height="1*"/>
                                <RowDefinition Height="6*"/>
                                <RowDefinition Height="1*"/>
                                <RowDefinition Height="1*"/>
                            </Grid.RowDefinitions>

                            <Border Grid.Row="0" BorderBrush="Wheat" BorderThickness="1">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition/>
                                        <ColumnDefinition Width="5*"/>
                                    </Grid.ColumnDefinitions>

                                    <Grid Grid.ColumnSpan="2">

                                        <Grid.RowDefinitions>
                                            <RowDefinition/>
                                            <RowDefinition/>
                                        </Grid.RowDefinitions>

                                        <Grid Grid.Row="0">

                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="4*"/>
                                                <ColumnDefinition Width="6*"/>
                                            </Grid.ColumnDefinitions>

                                            <Grid Grid.Column="0">
                                                <Label Content="START DATE" 
                                                   FontSize="12" 
                                               VerticalContentAlignment="Center"
                                               HorizontalContentAlignment="Center"
                                               HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                            </Grid>

                                            <Grid Grid.Column="1">
                                                <DatePicker AutomationProperties.AutomationId="dpStartDate"
                                                            Name="StartDatePicker"
                                                            Width="130" Height="20" FontSize="9" 
                                                            VerticalAlignment="Center"
                                                            HorizontalAlignment="Left"
                                                            VerticalContentAlignment="Center" 
                                                            HorizontalContentAlignment="Center" 
                                                            Foreground="Black"
                                                            Background="WhiteSmoke"
                                                            SelectedDate ="{Binding StartDate, Mode=TwoWay}"
                                                            materialDesign:HintAssist.Hint="Start Date" 
                                                            Margin="0,-20,0,0">
                                                    <DatePicker.RenderTransform>
                                                        <ScaleTransform ScaleX="2" ScaleY="2"/>
                                                    </DatePicker.RenderTransform>
                                                </DatePicker>
                                            </Grid>

                                        </Grid>

                                        <Grid Grid.Row="1">

                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="4*"/>
                                                <ColumnDefinition Width="6*"/>
                                            </Grid.ColumnDefinitions>

                                            <Grid Grid.Column="0">
                                                <Label Content="END DATE" 
                                                   FontSize="12" 
                                               VerticalContentAlignment="Center"
                                               HorizontalContentAlignment="Center"
                                               HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                            </Grid>

                                            <Grid Grid.Column="1">
                                                <DatePicker AutomationProperties.AutomationId="dpEndDate"
                                                            Name="EndDatePicker"
                                                            Width="130" Height="20" FontSize="9" 
                                                            VerticalAlignment="Center"
                                                            HorizontalAlignment="Left"
                                                            VerticalContentAlignment="Center" 
                                                            HorizontalContentAlignment="Center" 
                                                            Foreground="Black"
                                                            Background="WhiteSmoke"
                                                            SelectedDate ="{Binding EndDate, Mode=TwoWay}"
                                                            materialDesign:HintAssist.Hint="Start Date" 
                                                            Margin="0,-20,0,0">    
                                                    <DatePicker.RenderTransform>
                                                        <ScaleTransform ScaleX="2" ScaleY="2"/>
                                                    </DatePicker.RenderTransform>
                                                </DatePicker>
                                            </Grid>

                                        </Grid>

                                    </Grid>

                                </Grid>
                            </Border>

                            <Border Grid.Row="1" BorderBrush="Wheat" BorderThickness="1">
                                <Grid>

                                    <Grid Grid.Row="1">

                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="4*"/>
                                            <ColumnDefinition Width="6*"/>
                                        </Grid.ColumnDefinitions>

                                        <Grid Grid.Column="0">
                                            <Label Content="Status filter" 
                                               FontSize="12"
                                               VerticalAlignment="Center" 
                                               HorizontalAlignment="Center"
                                               ></Label>
                                        </Grid>

                                        <Grid Grid.Column="1">

                                            <ComboBox AutomationProperties.AutomationId="cmbStatusFilter"
                                                      Margin="0,4,0,4" 
                                                      ItemsSource="{Binding Source={StaticResource getDataFromPadStatusResultEnum}}"
                                                      Style="{x:Null}"
                                                      VerticalContentAlignment="Center"
                                                      HorizontalContentAlignment="Center"
                                                      Foreground="Black"
                                                      Background="Black"
                                                      FontSize="20"
                                                      FontWeight="Bold"
                                                      MinWidth="100"
                                                      SelectedItem="{Binding StatusFilter}">
                                                <!--<i:Interaction.Triggers>
                                                    <i:EventTrigger EventName="SelectionChanged">
                                                        <i:InvokeCommandAction Command="{Binding StatusFilterChangedCommand}"
                                                           CommandParameter="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=ComboBox}}"/>
                                                    </i:EventTrigger>
                                                </i:Interaction.Triggers>-->

                                            </ComboBox>

                                        </Grid>

                                    </Grid>

                                </Grid>
                            </Border>

                            <Border Grid.Row="2" BorderBrush="Wheat" BorderThickness="1">
                                <Grid>

                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="8.2*"/>
                                        <ColumnDefinition Width="1.8*"/>
                                    </Grid.ColumnDefinitions>

                                    <Grid Grid.Column="0">
                                        <ListView x:Name="uiWaferListView"
                                                  Background="Black"
                                                  ItemsSource="{Binding PMIWaferInfos}"
                                                  HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                                                  ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                                  ScrollViewer.VerticalScrollBarVisibility="Disabled"
                                                  ctrl:ListViewLayoutManager.Enabled="True"
                                                  AllowDrop="False"
                                                  SelectedIndex="{Binding SelectedWaferIndex}"
                                                  SelectedItem="{Binding SelectedWaferInfo}">

                                            <!--<i:Interaction.Triggers>
                                                <i:EventTrigger EventName="SelectionChanged">
                                                    <i:InvokeCommandAction Command="{Binding SelectedItemChangedCommand}"  
                                                       CommandParameter="{Binding ElementName=uiWaferListView, Path=SelectedItem}"/>
                                                </i:EventTrigger>
                                            </i:Interaction.Triggers>-->

                                            <i:Interaction.Behaviors>
                                                <Behaviors:ScrollIntoViewForListBox/>
                                            </i:Interaction.Behaviors>

                                            <ListView.ItemContainerStyle>
                                                <Style TargetType="{x:Type ListViewItem}">
                                                    <Style.Triggers>

                                                        <Trigger Property="IsMouseOver" Value="False">
                                                            <Setter Property="Foreground" Value="White" />
                                                        </Trigger>

                                                        <Trigger Property="IsMouseOver" Value="True">
                                                            <Setter Property="Foreground" Value="White" />
                                                            <Setter Property="Background" Value="Transparent" />
                                                        </Trigger>

                                                        <Trigger Property="IsSelected" Value="True">
                                                            <Setter Property="Background" Value="Green" />
                                                        </Trigger>

                                                    </Style.Triggers>
                                                </Style>
                                            </ListView.ItemContainerStyle>

                                            <ListView.View>
                                                <GridView AllowsColumnReorder="False">

                                                    <GridView.ColumnHeaderContainerStyle>

                                                        <Style TargetType="{x:Type GridViewColumnHeader}">
                                                            <!-- Set any properties you want to set -->
                                                            <Setter Property="Background" Value="White" />
                                                            <Setter Property="Foreground" Value="Black" />
                                                            <Setter Property="FontWeight" Value="Bold" />
                                                            <Setter Property="FontSize" Value="20"/>
                                                        </Style>

                                                    </GridView.ColumnHeaderContainerStyle>

                                                    <GridViewColumn
                                                DisplayMemberBinding="{Binding Path=WaferID}"
                                                ctrl:ProportionalColumn.Width="5"
                                                Header="Wafer ID"/>
                                                    <!--<GridViewColumn 
                                                DisplayMemberBinding="{Binding Path=NumberOfImages}"
                                                ctrl:ProportionalColumn.Width="5"
                                                Header="Number of images"/>-->
                                                </GridView>
                                            </ListView.View>

                                        </ListView>
                                    </Grid>

                                    <Grid Grid.Column="1">

                                        <Border Grid.Column="0" BorderBrush="Wheat" BorderThickness="1">

                                            <StackPanel Orientation="Vertical">

                                                <Button AutomationProperties.AutomationId="btnRefresh"
                                                        Command="{Binding WaferListRefreshCommand}" Width="60" Height="60">
                                                    <Button.Content>
                                                        <Grid>

                                                            <Grid.RowDefinitions>
                                                                <RowDefinition/>
                                                                <RowDefinition Height="Auto"/>
                                                            </Grid.RowDefinitions>

                                                            <Viewbox Grid.Row="0">
                                                                <Canvas Width="24" Height="24">
                                                                    <Path Fill="Black" Data="M12,18A6,6 0 0,1 6,12C6,11 6.25,10.03 6.7,9.2L5.24,7.74C4.46,8.97 4,10.43 4,12A8,8 0 0,0 12,20V23L16,19L12,15M12,4V1L8,5L12,9V6A6,6 0 0,1 18,12C18,13 17.75,13.97 17.3,14.8L18.76,16.26C19.54,15.03 20,13.57 20,12A8,8 0 0,0 12,4Z" />
                                                                </Canvas>

                                                            </Viewbox>
                                                            <TextBlock Margin="0,-10,0,0" FontSize="15" Grid.Row="1" TextAlignment="Center" FontWeight="Bold" Text="Refresh" />
                                                        </Grid>
                                                    </Button.Content>
                                                </Button>

                                                <Button AutomationProperties.AutomationId="btnClear"
                                                        Command="{Binding WaferListClearCommand}" 
                                                        Margin="0,20,0,0"
                                                        Width="60" Height="60">
                                                    <Button.Content>
                                                        <Grid>

                                                            <Grid.RowDefinitions>
                                                                <RowDefinition/>
                                                                <RowDefinition Height="Auto"/>
                                                            </Grid.RowDefinitions>

                                                            <Viewbox Grid.Row="0">
                                                                <Canvas Width="24" Height="24">
                                                                    <Path Fill="Black" Data="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z" />
                                                                </Canvas>

                                                            </Viewbox>
                                                            <TextBlock Margin="0,-10,0,0" FontSize="15" Grid.Row="1" TextAlignment="Center" FontWeight="Bold" Text="Clear" />
                                                        </Grid>
                                                    </Button.Content>
                                                </Button>

                                            </StackPanel>

                                        </Border>

                                    </Grid>

                                </Grid>
                            </Border>

                            <Border Grid.Row="3" BorderBrush="Wheat" BorderThickness="1">

                                <Grid>

                                    <Border Grid.Column="1" BorderBrush="Wheat" BorderThickness="1">

                                        <Grid>

                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="4*"/>
                                                <ColumnDefinition Width="2.5*"/>
                                                <ColumnDefinition Width="2.5*"/>
                                                <ColumnDefinition Width="2.5*"/>
                                                <ColumnDefinition Width="4*"/>
                                            </Grid.ColumnDefinitions>

                                            <Grid Grid.Column="0">
                                                <Button AutomationProperties.AutomationId="btnWaferlistPrev"
                                                        Width="60" Height="60" VerticalAlignment="Center" Margin="0,5" Click="OnScrollWaferlistUp">
                                                    <Viewbox Width="48" Height="48">
                                                        <Canvas Width="24" Height="24">
                                                            <Path Fill="Black" Data="M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z" />
                                                        </Canvas>
                                                    </Viewbox>
                                                </Button>
                                            </Grid>

                                            <Grid Grid.Column="1">
                                                <Label Content="{Binding SelectedWaferIndex, Converter={StaticResource PlusOneConv}, ConverterParameter=plusOne}"
                                               Foreground="White"
                                               Width="Auto"
                                               VerticalAlignment="Center"
                                               HorizontalAlignment="Center"
                                               HorizontalContentAlignment="Stretch"
                                               FontSize="14"/>
                                            </Grid>

                                            <Grid Grid.Column="2">
                                                <Label Content="/"
                                               Foreground="White"
                                               Width="Auto"
                                               VerticalAlignment="Center"
                                               HorizontalAlignment="Center"
                                               HorizontalContentAlignment="Stretch"
                                               FontSize="14"/>
                                            </Grid>

                                            <Grid Grid.Column="3">
                                                <Label Content="{Binding PMIWaferInfos.Count}"
                                               Foreground="White"
                                               Width="Auto"
                                               VerticalAlignment="Center"
                                               HorizontalAlignment="Center"
                                               HorizontalContentAlignment="Stretch"
                                               FontSize="14"/>
                                            </Grid>


                                            <Grid Grid.Column="4">

                                                <Button AutomationProperties.AutomationId="btnWaferlistNext"
                                                        Width="60" Height="60" VerticalAlignment="Center" Margin="0,5" Click="OnScrollWaferlistDown">
                                                    <Viewbox Width="48" Height="48">
                                                        <Canvas Width="24" Height="24">
                                                            <Path Fill="Black" Data="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" />
                                                        </Canvas>
                                                    </Viewbox>
                                                </Button>

                                            </Grid>

                                        </Grid>

                                    </Border>
                                </Grid>

                            </Border>

                            <Border Grid.Row="4" BorderBrush="Wheat" BorderThickness="1">
                                <Grid>

                                    <Button AutomationProperties.AutomationId="btnImageReload"
                                            Command="{Binding ImageReloadCommand}" Width="200" Height="60">
                                        <Button.Content>
                                            <Grid>

                                                <Grid.RowDefinitions>
                                                    <RowDefinition/>
                                                    <RowDefinition Height="Auto"/>
                                                </Grid.RowDefinitions>

                                                <Viewbox Grid.Row="0">
                                                    <Canvas Width="24" Height="24">
                                                        <Path Fill="Black" Data="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z" />
                                                    </Canvas>

                                                </Viewbox>
                                                <TextBlock Margin="0,-10,0,0" FontSize="15" Grid.Row="1" TextAlignment="Center" FontWeight="Bold" Text="Load Images" />
                                            </Grid>
                                        </Button.Content>
                                    </Button>

                                </Grid>
                            </Border>

                        </Grid>

                    </TabItem>

                    <TabItem AutomationProperties.AutomationId="tiSummary"
                             Header="Summary">

                        <Grid>

                            <Grid>

                                <Border BorderBrush="White" BorderThickness="1">

                                    <Grid>
                                        <Grid>
                                            <GroupBox Foreground="White" FontSize="14">

                                                <GroupBox.Header>
                                                    <Grid>

                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="*"/>
                                                            <ColumnDefinition Width="*"/>
                                                            <ColumnDefinition Width="*"/>
                                                            <ColumnDefinition Width="*"/>
                                                        </Grid.ColumnDefinitions>

                                                        <Grid Grid.Column="0">

                                                            <Grid.RowDefinitions>
                                                                <RowDefinition/>
                                                                <RowDefinition/>
                                                            </Grid.RowDefinitions>

                                                            <Grid Grid.Row="0">
                                                                <TextBlock HorizontalAlignment="Center">
                                                                    <TextBlock.Text>
                                                                        <MultiBinding Converter="{StaticResource PadIndexToStringConv}">
                                                                            <Binding Path="SelectedImageItem.SelectedPadIndex"/>
                                                                            <Binding Path="SelectedImageItem.PadResult.Count"/>
                                                                        </MultiBinding>
                                                                    </TextBlock.Text>
                                                                </TextBlock>
                                                            </Grid>

                                                            <Grid Grid.Row="1">
                                                                <Label Foreground="{Binding SelectedImageItem.SelectedPadResult.PadStatus, Converter={StaticResource PadStatusToForegroundConv}}"
                                                                       Content="{Binding SelectedImageItem.SelectedPadResult.PadStatus, Converter={StaticResource PadStatusCodeEnumToStringConv}}"/>
                                                            </Grid>
                                                        </Grid>

                                                        <Grid Grid.Column="1">

                                                            <Grid.ColumnDefinitions>
                                                                <ColumnDefinition Width="*"/>
                                                                <ColumnDefinition Width="*"/>
                                                            </Grid.ColumnDefinitions>

                                                            <Grid Grid.Column="0">
                                                                <Button AutomationProperties.AutomationId="btnPadPrev"
                                                                        Width="48" Height="48" VerticalAlignment="Center" Margin="0,5"
                                                                        Command="{Binding ChangePadIndexCommand}" 
                                                                        CommandParameter="{x:Static pi:SELECT_DIRECTION.PREV}">
                                                                    <Viewbox Width="48" Height="48">
                                                                        <Canvas Width="24" Height="24">
                                                                            <Path Fill="Black" Data="M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z" />
                                                                        </Canvas>
                                                                    </Viewbox>
                                                                </Button>
                                                            </Grid>

                                                            <Grid Grid.Column="1">
                                                                <Button AutomationProperties.AutomationId="btnPadNext"
                                                                        Width="48" Height="48" VerticalAlignment="Center" Margin="0,5"
                                                                        Command="{Binding ChangePadIndexCommand}" 
                                                                        CommandParameter="{x:Static pi:SELECT_DIRECTION.NEXT}">
                                                                    <Viewbox Width="48" Height="48">
                                                                        <Canvas Width="24" Height="24">
                                                                            <Path Fill="Black" Data="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" />
                                                                        </Canvas>
                                                                    </Viewbox>
                                                                </Button>
                                                            </Grid>
                                                        </Grid>

                                                        <Grid Grid.Column="2">

                                                            <Grid Grid.Row="0">
                                                                <TextBlock HorizontalAlignment="Center" VerticalAlignment="Top">
                                                                    <TextBlock.Text>
                                                                        <MultiBinding Converter="{StaticResource MarkIndexToStringConv}">
                                                                            <Binding Path="SelectedImageItem.SelectedMarkIndex"/>
                                                                            <Binding Path="SelectedImageItem.SelectedPadResult.MarkResults.Count"/>
                                                                        </MultiBinding>
                                                                    </TextBlock.Text>
                                                                </TextBlock>
                                                            </Grid>

                                                        </Grid>

                                                        <Grid Grid.Column="3">

                                                            <Grid.ColumnDefinitions>
                                                                <ColumnDefinition Width="*"/>
                                                                <ColumnDefinition Width="*"/>
                                                            </Grid.ColumnDefinitions>

                                                            <Grid Grid.Column="0">
                                                                <Button AutomationProperties.AutomationId="btnMarkPrev"
                                                                        Width="48" Height="48" VerticalAlignment="Center" Margin="0,5"
                                                                        Command="{Binding ChangeMarkIndexCommand}" 
                                                                        CommandParameter="{x:Static pi:SELECT_DIRECTION.PREV}">
                                                                    <Viewbox Width="48" Height="48">
                                                                        <Canvas Width="24" Height="24">
                                                                            <Path Fill="Black" Data="M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z" />
                                                                        </Canvas>
                                                                    </Viewbox>
                                                                </Button>
                                                            </Grid>

                                                            <Grid Grid.Column="1">
                                                                <Button AutomationProperties.AutomationId="btnMarkNext"
                                                                        Width="48" Height="48" VerticalAlignment="Center" Margin="0,5"
                                                                        Command="{Binding ChangeMarkIndexCommand}" 
                                                                        CommandParameter="{x:Static pi:SELECT_DIRECTION.NEXT}">
                                                                    <Viewbox Width="48" Height="48">
                                                                        <Canvas Width="24" Height="24">
                                                                            <Path Fill="Black" Data="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" />
                                                                        </Canvas>
                                                                    </Viewbox>
                                                                </Button>
                                                            </Grid>
                                                        </Grid>

                                                    </Grid>
                                                </GroupBox.Header>

                                                <!--<GroupBox.Header>
                                                    <MultiBinding Converter="{StaticResource MarkIndexToStringConv}">
                                                        <Binding Path="SelectedImageItem.SelectedMarkIndex"/>
                                                        <Binding Path="SelectedImageItem.SelectedPadResult.MarkResults.Count"/>
                                                    </MultiBinding>
                                                </GroupBox.Header>-->

                                                <Grid>

                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition/>
                                                        <ColumnDefinition/>
                                                    </Grid.ColumnDefinitions>

                                                    <Grid Grid.Column="0">

                                                        <GroupBox Header="Mark Information">

                                                            <!--<StackPanel Orientation="Vertical" Margin="-20,-10,0,0">
                                                                
                                                                <StackPanel Orientation="Horizontal">
                                                                    <Label Content="Size X : " FontSize="12" Foreground="White"/>
                                                                    <TextBlock VerticalAlignment="Center" Text="{Binding SelectedImageItem.SelectedMarkResult.ScrubSizeX, StringFormat=F2}"/>
                                                                </StackPanel>
                                                                
                                                            </StackPanel>-->

                                                            <Grid ShowGridLines="True">

                                                                <Grid.RowDefinitions>
                                                                    <RowDefinition Height="*"/>
                                                                    <RowDefinition Height="*"/>
                                                                    <RowDefinition Height="*"/>
                                                                    <RowDefinition Height="*"/>
                                                                    <RowDefinition Height="*"/>
                                                                    <RowDefinition Height="*"/>
                                                                    <RowDefinition Height="*"/>
                                                                    <RowDefinition Height="*"/>
                                                                    <RowDefinition Height="*"/>
                                                                    <RowDefinition Height="*"/>
                                                                </Grid.RowDefinitions>

                                                                <Grid Grid.Row="0">

                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition/>
                                                                        <ColumnDefinition/>
                                                                    </Grid.ColumnDefinitions>

                                                                    <TextBlock Grid.Column="0" HorizontalAlignment="Center" VerticalAlignment="Center" Text="Size X : "/>
                                                                    <TextBlock Grid.Column="1" VerticalAlignment="Center" Text="{Binding SelectedImageItem.SelectedMarkResult.ScrubSizeX, StringFormat={}{0:F2} um}"/>
                                                                </Grid>

                                                                <Grid Grid.Row="1">

                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition/>
                                                                        <ColumnDefinition/>
                                                                    </Grid.ColumnDefinitions>

                                                                    <TextBlock Grid.Column="0" HorizontalAlignment="Center" VerticalAlignment="Center" Text="Size Y : "/>
                                                                    <TextBlock Grid.Column="1" VerticalAlignment="Center" Text="{Binding SelectedImageItem.SelectedMarkResult.ScrubSizeY, StringFormat={}{0:F2} um}"/>

                                                                </Grid>

                                                                <Grid Grid.Row="2">

                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition/>
                                                                        <ColumnDefinition/>
                                                                    </Grid.ColumnDefinitions>

                                                                    <TextBlock Grid.Column="0" HorizontalAlignment="Center" VerticalAlignment="Center" Text="offset X :"/>
                                                                    <TextBlock Grid.Column="1" VerticalAlignment="Center" Text="{Binding SelectedImageItem.SelectedMarkResult.ScrubCenterX, StringFormat={}{0:F2} um}"/>

                                                                </Grid>

                                                                <Grid Grid.Row="3">

                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition/>
                                                                        <ColumnDefinition/>
                                                                    </Grid.ColumnDefinitions>

                                                                    <TextBlock Grid.Column="0" HorizontalAlignment="Center" VerticalAlignment="Center" Text="offset Y :"/>
                                                                    <TextBlock Grid.Column="1" VerticalAlignment="Center" Text="{Binding SelectedImageItem.SelectedMarkResult.ScrubCenterY, StringFormat={}{0:F2} um}"/>

                                                                </Grid>

                                                                <Grid Grid.Row="4">

                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition/>
                                                                        <ColumnDefinition/>
                                                                    </Grid.ColumnDefinitions>

                                                                    <TextBlock Grid.Column="0" HorizontalAlignment="Center" VerticalAlignment="Center" Text="Area:"/>
                                                                    <TextBlock Grid.Column="1" VerticalAlignment="Center" Text="{Binding SelectedImageItem.SelectedMarkResult.ScrubArea, StringFormat={}{0:F2} um^2}"/>

                                                                </Grid>

                                                                <Grid Grid.Row="5">
                                                                    <TextBlock Grid.Column="0" HorizontalAlignment="Center" VerticalAlignment="Center" Text="Proximity ▼"/>
                                                                </Grid>

                                                                <Grid Grid.Row="6">

                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition/>
                                                                        <ColumnDefinition/>
                                                                    </Grid.ColumnDefinitions>

                                                                    <TextBlock Grid.Column="0" HorizontalAlignment="Center" VerticalAlignment="Center" Text="Top :"/>
                                                                    <TextBlock Grid.Column="1" VerticalAlignment="Center" Text="{Binding SelectedImageItem.SelectedMarkResult.MarkProximity.Top, StringFormat={}{0:F2} um}"/>
                                                                </Grid>

                                                                <Grid Grid.Row="7">

                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition/>
                                                                        <ColumnDefinition/>
                                                                    </Grid.ColumnDefinitions>

                                                                    <TextBlock Grid.Column="0" HorizontalAlignment="Center" VerticalAlignment="Center" Text="Bottom :"/>
                                                                    <TextBlock Grid.Column="1" VerticalAlignment="Center" Text="{Binding SelectedImageItem.SelectedMarkResult.MarkProximity.Bottom, StringFormat={}{0:F2} um}"/>
                                                                </Grid>

                                                                <Grid Grid.Row="8">

                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition/>
                                                                        <ColumnDefinition/>
                                                                    </Grid.ColumnDefinitions>

                                                                    <TextBlock Grid.Column="0" HorizontalAlignment="Center" VerticalAlignment="Center" Text="Left :"/>
                                                                    <TextBlock Grid.Column="1" VerticalAlignment="Center" Text="{Binding SelectedImageItem.SelectedMarkResult.MarkProximity.Left, StringFormat={}{0:F2} um}"/>
                                                                </Grid>

                                                                <Grid Grid.Row="9">

                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition/>
                                                                        <ColumnDefinition/>
                                                                    </Grid.ColumnDefinitions>

                                                                    <TextBlock Grid.Column="0" HorizontalAlignment="Center" VerticalAlignment="Center" Text="Right :"/>
                                                                    <TextBlock Grid.Column="1" VerticalAlignment="Center" Text="{Binding SelectedImageItem.SelectedMarkResult.MarkProximity.Right, StringFormat={}{0:F2} um}"/>
                                                                </Grid>

                                                            </Grid>
                                                        </GroupBox>



                                                    </Grid>

                                                    <Grid Grid.Column="1">

                                                        <GroupBox Header="Mark Status">
                                                            <StackPanel Orientation="Vertical">

                                                                <Label FontSize="12" VerticalContentAlignment="Stretch" Foreground="White" Content="PASS">
                                                                    <Label.Background>
                                                                        <MultiBinding Converter="{StaticResource MarkStatusToBackgroundMultiConv_PASS_Conv}">
                                                                            <Binding Path="SelectedImageItem.SelectedMarkResult.Status"/>
                                                                            <Binding Path="SelectedImageItem.SelectedPadResult.MarkResults.Count"/>
                                                                            <Binding Path="SelectedImageItem.SelectedMarkIndex"/>
                                                                        </MultiBinding>
                                                                    </Label.Background>
                                                                </Label>

                                                                <Label FontSize="12" VerticalContentAlignment="Stretch" Foreground="White" Content="TOO__CLOSE__EDGE">
                                                                    <Label.Background>
                                                                        <MultiBinding Converter="{StaticResource MarkStatusToBackgroundMultiConv_TOO_CLOSE_TO_EDGE_Conv}">
                                                                            <Binding Path="SelectedImageItem.SelectedMarkResult.Status"/>
                                                                            <Binding Path="SelectedImageItem.SelectedPadResult.MarkResults.Count"/>
                                                                            <Binding Path="SelectedImageItem.SelectedMarkIndex"/>
                                                                        </MultiBinding>
                                                                    </Label.Background>
                                                                </Label>

                                                                <Label FontSize="12" VerticalContentAlignment="Stretch" Foreground="White" Content="MARK__AREA__TOO__SMALL">
                                                                    <Label.Background>
                                                                        <MultiBinding Converter="{StaticResource MarkStatusToBackgroundMultiConv_MARK_AREA_TOO_SMALL_Conv}">
                                                                            <Binding Path="SelectedImageItem.SelectedMarkResult.Status"/>
                                                                            <Binding Path="SelectedImageItem.SelectedPadResult.MarkResults.Count"/>
                                                                            <Binding Path="SelectedImageItem.SelectedMarkIndex"/>
                                                                        </MultiBinding>
                                                                    </Label.Background>
                                                                </Label>

                                                                <Label FontSize="12" VerticalContentAlignment="Stretch" Foreground="White" Content="MARK__AREA__TOO__BIG">
                                                                    <Label.Background>
                                                                        <MultiBinding Converter="{StaticResource MarkStatusToBackgroundMultiConv_MARK_AREA_TOO_BIG_Conv}">
                                                                            <Binding Path="SelectedImageItem.SelectedMarkResult.Status"/>
                                                                            <Binding Path="SelectedImageItem.SelectedPadResult.MarkResults.Count"/>
                                                                            <Binding Path="SelectedImageItem.SelectedMarkIndex"/>
                                                                        </MultiBinding>
                                                                    </Label.Background>
                                                                </Label>

                                                                <Label FontSize="12" VerticalContentAlignment="Stretch" Foreground="White" Content="MARK__SIZE__TOO__SMALL">
                                                                    <Label.Background>
                                                                        <MultiBinding Converter="{StaticResource MarkStatusToBackgroundMultiConv_MARK_SIZE_TOO_SMALL_Conv}">
                                                                            <Binding Path="SelectedImageItem.SelectedMarkResult.Status"/>
                                                                            <Binding Path="SelectedImageItem.SelectedPadResult.MarkResults.Count"/>
                                                                            <Binding Path="SelectedImageItem.SelectedMarkIndex"/>
                                                                        </MultiBinding>
                                                                    </Label.Background>
                                                                </Label>

                                                                <Label FontSize="12" VerticalContentAlignment="Stretch" Foreground="White" Content="MARK__SIZE__TOO__BIG">
                                                                    <Label.Background>
                                                                        <MultiBinding Converter="{StaticResource MarkStatusToBackgroundMultiConv_MARK_SIZE_TOO_BIG_Conv}">
                                                                            <Binding Path="SelectedImageItem.SelectedMarkResult.Status"/>
                                                                            <Binding Path="SelectedImageItem.SelectedPadResult.MarkResults.Count"/>
                                                                            <Binding Path="SelectedImageItem.SelectedMarkIndex"/>
                                                                        </MultiBinding>
                                                                    </Label.Background>
                                                                </Label>

                                                                <Label FontSize="12" VerticalContentAlignment="Stretch" Foreground="White" Content="NO__PROBE__MARK">
                                                                    <Label.Background>
                                                                        <MultiBinding Converter="{StaticResource PadStatusToBackgroundMultiConv_NO_PROBE_MARK_Conv}">
                                                                            <Binding Path="SelectedImageItem.SelectedPadResult.PadStatus"/>
                                                                            <Binding Path="SelectedImageItem.SelectedPadIndex"/>
                                                                        </MultiBinding>
                                                                    </Label.Background>
                                                                </Label>

                                                                <Label FontSize="12" VerticalContentAlignment="Stretch" Foreground="White" Content="TOO__MANY__PROBE__MARK">
                                                                    <Label.Background>
                                                                        <MultiBinding Converter="{StaticResource PadStatusToBackgroundMultiConv_TOO_MANY_PROBE_MARK_Conv}">
                                                                            <Binding Path="SelectedImageItem.SelectedPadResult.PadStatus"/>
                                                                            <Binding Path="SelectedImageItem.SelectedPadIndex"/>
                                                                        </MultiBinding>
                                                                    </Label.Background>
                                                                </Label>

                                                            </StackPanel>
                                                        </GroupBox>

                                                        <!--<StackPanel Orientation="Vertical">
                                                                <Label Foreground="White"  
                                                                           Content="[Mark Status]"/>
                                                                <Label Foreground="White" Background="{Binding SelectedMarkResult.Status, Converter= {StaticResource MarkStatusToBackground_PASS_Conv}}" 
                                                                           Content="PASS"/>
                                                                <Label Foreground="White" Background="{Binding SelectedMarkResult.Status, Converter= {StaticResource MarkStatusToBackground_TOO_CLOSE_TO_EDGE_Conv}}"
                                                                           Content="TOO_CLOSE_EDGE"/>
                                                                <Label Foreground="White" Background="{Binding SelectedMarkResult.Status, Converter= {StaticResource MarkStatusToBackground_MARK_AREA_TOO_SMALL_Conv}}"
                                                                           Content="MARK_AREA_TOO_SMALL"/>
                                                                <Label Foreground="White" Background="{Binding SelectedMarkResult.Status, Converter= {StaticResource MarkStatusToBackground_MARK_AREA_TOO_BIG_Conv}}"
                                                                           Content="MARK_AREA_TOO_BIG"/>
                                                                <Label Foreground="White" Background="{Binding SelectedMarkResult.Status, Converter= {StaticResource MarkStatusToBackground_MARK_SIZE_TOO_SMALL_Conv}}"
                                                                           Content="MARK_SIZE_TOO_SMALL"/>
                                                                <Label Foreground="White" Background="{Binding SelectedMarkResult.Status, Converter= {StaticResource MarkStatusToBackground_MARK_SIZE_TOO_BIG_Conv}}"
                                                                           Content="MARK_SIZE_TOO_BIG"/>
                                                            </StackPanel>-->

                                                        <!--<Grid Grid.Row="1">

                                                            <Grid.ColumnDefinitions>
                                                                <ColumnDefinition/>
                                                                <ColumnDefinition/>
                                                            </Grid.ColumnDefinitions>

                                                            <Grid Grid.Column="0">
                                                                <Button Width="60" Height="48" VerticalAlignment="Center" Margin="0,5"
                                                                                    Command="{Binding ChangeMarkIndexCommand}" 
                                                                                    CommandParameter="{x:Static pi:SELECT_DIRECTION.PREV}">
                                                                    <Viewbox Width="48" Height="48">
                                                                        <Canvas Width="24" Height="24">
                                                                            <Path Fill="Black" Data="M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z" />
                                                                        </Canvas>
                                                                    </Viewbox>
                                                                </Button>
                                                            </Grid>

                                                            <Grid Grid.Column="1">
                                                                <Button Width="60" Height="48" VerticalAlignment="Center" Margin="0,5"
                                                                                    Command="{Binding ChangeMarkIndexCommand}" 
                                                                                    CommandParameter="{x:Static pi:SELECT_DIRECTION.NEXT}">
                                                                    <Viewbox Width="48" Height="48">
                                                                        <Canvas Width="24" Height="24">
                                                                            <Path Fill="Black" Data="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" />
                                                                        </Canvas>
                                                                    </Viewbox>
                                                                </Button>
                                                            </Grid>
                                                        </Grid>-->

                                                    </Grid>

                                                </Grid>

                                            </GroupBox>

                                        </Grid>

                                    </Grid>

                                </Border>





                                <!--<ListView x:Name="uiListView" Background="Black"
                              ItemsSource="{Binding FilteredPMIImageInfolist}"
                              HorizontalAlignment="Stretch" VerticalAlignment="Stretch" 
                              ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                              ScrollViewer.VerticalScrollBarVisibility="Disabled"
                              SelectedIndex="{Binding SelectedImageItemIndex}"
                              SelectedItem="{Binding SelectedImageItem}">

                                    <i:Interaction.Triggers>
                                        <i:EventTrigger EventName="SelectionChanged">
                                            <i:InvokeCommandAction Command="{Binding SelectedItemChangedCommand}"  
                                                       CommandParameter="{Binding ElementName=uiListView, Path=SelectedItem}"/>
                                        </i:EventTrigger>
                                    </i:Interaction.Triggers>

                                    <i:Interaction.Behaviors>
                                        <Behaviors:ScrollIntoViewForListBox/>
                                    </i:Interaction.Behaviors>

                                    <ListView.ItemTemplate>
                                        <DataTemplate>

                                            <Border BorderBrush="White" BorderThickness="1">

                                                <Grid>

                                                    <Grid.RowDefinitions>
                                                        <RowDefinition/>
                                                        <RowDefinition/>
                                                        <RowDefinition/>
                                                    </Grid.RowDefinitions>

                                                    <Grid Grid.Row="0">

                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="*"/>
                                                            <ColumnDefinition Width="*"/>
                                                        </Grid.ColumnDefinitions>

                                                        <Grid Grid.Column="0">
                                                            <Border BorderBrush="White" BorderThickness="1">
                                                                <Label Foreground="White" Content="{Binding DateAndTime}"/>
                                                            </Border>
                                                        </Grid>

                                                        <Grid Grid.Column="1">
                                                            <Border BorderBrush="White" BorderThickness="1">
                                                                <Label Foreground="White" Content="{Binding WaferID}" ContentStringFormat="Wafer ID : {0}"/>
                                                            </Border>
                                                        </Grid>
                                                    </Grid>

                                                    <Grid Grid.Row="1">

                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="*"/>
                                                            <ColumnDefinition Width="*"/>
                                                        </Grid.ColumnDefinitions>

                                                        <Grid Grid.Column="0">
                                                            <Border BorderBrush="White" BorderThickness="1">
                                                                <Label Foreground="White"
                                                                       Content="{Binding Path=UI, Converter={StaticResource UserIndexToStringConv}}"/>
                                                            </Border>
                                                        </Grid>

                                                        <Grid Grid.Column="1">
                                                            <Border BorderBrush="White" BorderThickness="1">
                                                                <Label Foreground="White"
                                                                       Content="{Binding DutNumber}"
                                                                       ContentStringFormat="Dut#{0}"/>
                                                            </Border>
                                                        </Grid>
                                                    </Grid>

                                                    <Grid Grid.Row="2">

                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="*"/>
                                                            <ColumnDefinition Width="*"/>
                                                        </Grid.ColumnDefinitions>

                                                        <Grid Grid.Column="0">
                                                            <Border BorderBrush="White" BorderThickness="1">
                                                                <StackPanel>
                                                                    <Label Foreground="White"
                                                                       Content="Status : "/>
                                                                    <Label Foreground="White"
                                                                       Content="{Binding SelectedPadResult.PadStatus, Converter={StaticResource PadStatusCodeEnumToStringConv}}"/>
                                                                </StackPanel>
                                                            </Border>
                                                        </Grid>

                                                        <Grid Grid.Column="1">

                                                            <Grid.RowDefinitions>
                                                                <RowDefinition/>
                                                                <RowDefinition/>
                                                            </Grid.RowDefinitions>

                                                            <Grid Grid.Row="0">

                                                                <Border BorderBrush="White" BorderThickness="1">

                                                                    <Grid>

                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition/>
                                                                            <ColumnDefinition/>
                                                                            <ColumnDefinition/>
                                                                            <ColumnDefinition/>
                                                                        </Grid.ColumnDefinitions>

                                                                        <Grid Grid.Column="0">
                                                                            <Label Foreground="White" Content="Pad"/>
                                                                        </Grid>

                                                                        <Grid Grid.Column="1">
                                                                            <Label Content="{Binding SelectedPadIndex, Converter={StaticResource PlusOneConv}, ConverterParameter=plusOne}"/>
                                                                        </Grid>

                                                                        <Grid Grid.Column="2">
                                                                            <Label Foreground="White" Content="/"/>
                                                                        </Grid>

                                                                        <Grid Grid.Column="3">
                                                                            <Label Foreground="White" Content="{Binding PadResult.Count}"/>
                                                                        </Grid>

                                                                    </Grid>

                                                                </Border>

                                                            </Grid>

                                                            <Grid Grid.Row="1">

                                                                <Border BorderBrush="White" BorderThickness="1">

                                                                    <Grid>

                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition/>
                                                                            <ColumnDefinition/>
                                                                        </Grid.ColumnDefinitions>

                                                                        <Grid Grid.Column="0">
                                                                            <Button Width="60" Height="60" VerticalAlignment="Center" Margin="0,5"
                                                                                    Command="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.ChangePadIndexCommand}" 
                                                                                    CommandParameter="{x:Static pi:SELECT_DIRECTION.PREV}">
                                                                                <Viewbox Width="48" Height="48">
                                                                                    <Canvas Width="24" Height="24">
                                                                                        <Path Fill="Black" Data="M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z" />
                                                                                    </Canvas>
                                                                                </Viewbox>
                                                                            </Button>
                                                                        </Grid>

                                                                        <Grid Grid.Column="1">
                                                                            <Button Width="60" Height="60" VerticalAlignment="Center" Margin="0,5"
                                                                                    Command="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.ChangePadIndexCommand}" 
                                                                                    CommandParameter="{x:Static pi:SELECT_DIRECTION.NEXT}">
                                                                                <Viewbox Width="48" Height="48">
                                                                                    <Canvas Width="24" Height="24">
                                                                                        <Path Fill="Black" Data="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" />
                                                                                    </Canvas>
                                                                                </Viewbox>
                                                                            </Button>
                                                                        </Grid>
                                                                    </Grid>

                                                                </Border>

                                                            </Grid>
                                                        </Grid>
                                                    </Grid>

                                                    -->
                                <!--<Grid Grid.Row="3">

                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition/>
                                                            <ColumnDefinition/>
                                                        </Grid.ColumnDefinitions>

                                                        <Grid Grid.Column="0">

                                                            -->
                                <!-- Mark Information -->
                                <!--

                                                            <StackPanel Orientation="Vertical">
                                                                <StackPanel Orientation="Horizontal">
                                                                    <Label Content="Size X :"/>
                                                                    <TextBlock Text="{Binding }"/>
                                                                </StackPanel>
                                                            </StackPanel>
                                                            
                                                        </Grid>

                                                        <Grid Grid.Column="1">

                                                            <Grid.RowDefinitions>
                                                                <RowDefinition/>
                                                                <RowDefinition/>
                                                            </Grid.RowDefinitions>

                                                            <Grid Grid.Row="0">
                                                                
                                                                -->
                                <!-- Mark Status -->
                                <!--

                                                                <StackPanel Orientation="Vertical">
                                                                    <Label Foreground="White"  
                                                                           Content="[Mark Status]"/>
                                                                    <Label Foreground="White" Background="{Binding SelectedMarkResult.Status, Converter= {StaticResource MarkStatusToBackground_PASS_Conv}}" 
                                                                           Content="PASS"/>
                                                                    <Label Foreground="White" Background="{Binding SelectedMarkResult.Status, Converter= {StaticResource MarkStatusToBackground_TOO_CLOSE_TO_EDGE_Conv}}"
                                                                           Content="TOO_CLOSE_EDGE"/>
                                                                    <Label Foreground="White" Background="{Binding SelectedMarkResult.Status, Converter= {StaticResource MarkStatusToBackground_MARK_AREA_TOO_SMALL_Conv}}"
                                                                           Content="MARK_AREA_TOO_SMALL"/>
                                                                    <Label Foreground="White" Background="{Binding SelectedMarkResult.Status, Converter= {StaticResource MarkStatusToBackground_MARK_AREA_TOO_BIG_Conv}}"
                                                                           Content="MARK_AREA_TOO_BIG"/>
                                                                    <Label Foreground="White" Background="{Binding SelectedMarkResult.Status, Converter= {StaticResource MarkStatusToBackground_MARK_SIZE_TOO_SMALL_Conv}}"
                                                                           Content="MARK_SIZE_TOO_SMALL"/>
                                                                    <Label Foreground="White" Background="{Binding SelectedMarkResult.Status, Converter= {StaticResource MarkStatusToBackground_MARK_SIZE_TOO_BIG_Conv}}"
                                                                           Content="MARK_SIZE_TOO_BIG"/>
                                                                </StackPanel>
                                                            </Grid>

                                                            <Grid Grid.Row="1">

                                                                <Grid.RowDefinitions>
                                                                    <RowDefinition/>
                                                                    <RowDefinition/>
                                                                </Grid.RowDefinitions>
                                                                
                                                                <Grid Grid.Row="0">

                                                                    <Border BorderBrush="White" BorderThickness="1">

                                                                        <Grid>

                                                                            <Grid.ColumnDefinitions>
                                                                                <ColumnDefinition/>
                                                                                <ColumnDefinition/>
                                                                                <ColumnDefinition/>
                                                                                <ColumnDefinition/>
                                                                            </Grid.ColumnDefinitions>

                                                                            <Grid Grid.Column="0">
                                                                                <Label Foreground="White" Content="Pad"/>
                                                                            </Grid>

                                                                            <Grid Grid.Column="1">
                                                                                <Label Content="{Binding SelectedPadResult.SelectedMarkIndex, Converter={StaticResource PlusOneConv}, ConverterParameter=plusOne}"/>
                                                                            </Grid>

                                                                            <Grid Grid.Column="2">
                                                                                <Label Foreground="White" Content="/"/>
                                                                            </Grid>

                                                                            <Grid Grid.Column="3">
                                                                                <Label Foreground="White" Content="{Binding SelectedPadResult.MarkResults.Count}"/>
                                                                            </Grid>

                                                                        </Grid>

                                                                    </Border>

                                                                </Grid>

                                                                <Grid Grid.Row="1">

                                                                    <Border BorderBrush="White" BorderThickness="1">

                                                                        <Grid>

                                                                            <Grid.ColumnDefinitions>
                                                                                <ColumnDefinition/>
                                                                                <ColumnDefinition/>
                                                                            </Grid.ColumnDefinitions>

                                                                            <Grid Grid.Column="0">
                                                                                <Button Width="60" Height="60" VerticalAlignment="Center" Margin="0,5"
                                                                                    Command="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.ChangeMarkIndexCommand}" 
                                                                                    CommandParameter="{x:Static pi:SELECT_DIRECTION.PREV}">
                                                                                    <Viewbox Width="48" Height="48">
                                                                                        <Canvas Width="24" Height="24">
                                                                                            <Path Fill="Black" Data="M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z" />
                                                                                        </Canvas>
                                                                                    </Viewbox>
                                                                                </Button>
                                                                            </Grid>

                                                                            <Grid Grid.Column="1">
                                                                                <Button Width="60" Height="60" VerticalAlignment="Center" Margin="0,5"
                                                                                    Command="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.ChangeMarkIndexCommand}" 
                                                                                    CommandParameter="{x:Static pi:SELECT_DIRECTION.NEXT}">
                                                                                    <Viewbox Width="48" Height="48">
                                                                                        <Canvas Width="24" Height="24">
                                                                                            <Path Fill="Black" Data="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" />
                                                                                        </Canvas>
                                                                                    </Viewbox>
                                                                                </Button>
                                                                            </Grid>
                                                                        </Grid>

                                                                    </Border>

                                                                </Grid>
                                                                
                                                            </Grid>
                                                            
                                                        </Grid>

                                                    </Grid>-->
                                <!--

                                                </Grid>
                                            </Border>
                                        </DataTemplate>
                                    </ListView.ItemTemplate>
                                </ListView>-->

                                <!--<ListView x:Name="uiListView" Background="Black"
                              ItemsSource="{Binding FilteredPMIImageInfolist}"
                              HorizontalAlignment="Stretch" VerticalAlignment="Stretch" 
                              ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                              ScrollViewer.VerticalScrollBarVisibility="Disabled"
                              SelectedIndex="{Binding SelectedImageItemIndex}"
                              SelectedItem="{Binding SelectedImageItem}">

                                    <i:Interaction.Triggers>
                                        <i:EventTrigger EventName="SelectionChanged">
                                            <i:InvokeCommandAction Command="{Binding SelectedItemChangedCommand}"  
                                                       CommandParameter="{Binding ElementName=uiListView, Path=SelectedItem}"/>
                                        </i:EventTrigger>
                                    </i:Interaction.Triggers>

                                    <i:Interaction.Behaviors>
                                        <Behaviors:ScrollIntoViewForListBox/>
                                    </i:Interaction.Behaviors>

                                    <ListView.ItemTemplate>
                                        <DataTemplate>

                                            <Border BorderBrush="White" BorderThickness="1">
                                                <Grid>

                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="*"/>
                                                    </Grid.ColumnDefinitions>

                                                    <Grid Grid.Column="0">

                                                        <Grid.RowDefinitions>
                                                            <RowDefinition/>
                                                            <RowDefinition/>
                                                            <RowDefinition/>
                                                            <RowDefinition/>
                                                            <RowDefinition/>
                                                            <RowDefinition/>
                                                        </Grid.RowDefinitions>

                                                        <Grid Grid.Row="0">
                                                            <Label Content="Date :"></Label>
                                                        </Grid>

                                                        <Grid Grid.Row="1">
                                                            <Label Content="Time :"></Label>
                                                        </Grid>

                                                        <Grid Grid.Row="2">
                                                            <Label Content="User Index :"></Label>
                                                        </Grid>

                                                        <Grid Grid.Row="3">
                                                            <Label Content="Dut# : "></Label>
                                                        </Grid>

                                                        <Grid Grid.Row="4">
                                                            <Label Content="Status :"></Label>
                                                        </Grid>

                                                        -->
                                <!-- Fail Reason N개 가능-->
                                <!--
                                                        <Grid Grid.Row="5">
                                                            <Label Content="# : "></Label>
                                                        </Grid>

                                                    </Grid>

                                                    <Grid Grid.Column="1">


                                                        <Grid.RowDefinitions>
                                                            <RowDefinition/>
                                                            <RowDefinition/>
                                                            <RowDefinition/>
                                                            <RowDefinition/>
                                                            <RowDefinition/>
                                                            <RowDefinition/>
                                                        </Grid.RowDefinitions>

                                                        <Grid Grid.Row="0">
                                                            <TextBox Text="{Binding Date}" Style="{x:Null}" 
                                                             HorizontalAlignment="Center"
                                                             IsReadOnly="True"
                                                             Foreground="White"
                                                             Background="Black"
                                                             VerticalAlignment="Center" Width="Auto"/>
                                                        </Grid>

                                                        <Grid Grid.Row="1">
                                                            <TextBox Text="{Binding Time}" Style="{x:Null}" 
                                                             HorizontalAlignment="Center"
                                                             IsReadOnly="True"
                                                             Foreground="White"
                                                             Background="Black"
                                                             VerticalAlignment="Center" Width="Auto"/>
                                                        </Grid>

                                                        <Grid Grid.Row="2">
                                                            <TextBox Text="{Binding UI, Converter={StaticResource PMIUserIndexToStringConv}}" Style="{x:Null}"
                                                             HorizontalAlignment="Center"
                                                             IsReadOnly="True"
                                                             Foreground="White"
                                                             Background="Black"
                                                             VerticalAlignment="Center" Width="Auto"/>
                                                        </Grid>

                                                        <Grid Grid.Row="3">
                                                            <TextBox Text="{Binding DutNumber}" Style="{x:Null}"
                                                             HorizontalAlignment="Center"
                                                             IsReadOnly="True"
                                                             Foreground="White"
                                                             Background="Black"
                                                             VerticalAlignment="Center" Width="Auto"/>
                                                        </Grid>

                                                        <Grid Grid.Row="4">
                                                            <TextBox Text="{Binding Status}" Style="{x:Null}" 
                                                             HorizontalAlignment="Center"
                                                             IsReadOnly="True"
                                                             Foreground="{Binding Status, Converter={StaticResource PMIResulttoForegroundConv}}"
                                                             Background="Black"
                                                             VerticalAlignment="Center" Width="Auto"/>
                                                        </Grid>

                                                        -->
                                <!-- Fail Reason N개 가능-->
                                <!--
                                                        <Grid Grid.Row="5">
                                                            <Label Content="Dut# : "></Label>
                                                        </Grid>

                                                    </Grid>

                                                    -->
                                <!--<Border BorderThickness="1" BorderBrush="White" Grid.Column="1">
                                                        <Grid>
                                                            <Image Source="{Binding InterestImage.Source}" UseLayoutRounding="True" Stretch="Uniform"/>
                                                        </Grid>
                                                    </Border>-->
                                <!--

                                                </Grid>

                                            </Border>

                                        </DataTemplate>
                                    </ListView.ItemTemplate>
                                </ListView>-->

                            </Grid>

                        </Grid>



                    </TabItem>

                </TabControl>

            </Border>

        </Grid>
    </Grid>
</UserControl>
