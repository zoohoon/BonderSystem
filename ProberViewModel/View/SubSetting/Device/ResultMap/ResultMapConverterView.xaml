<UserControl x:Class="ProberViewModel.View.SubSetting.Device.ResultMap.ResultMapConverterView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:local="clr-namespace:ProberViewModel.View.SubSetting.Device.ResultMap"
             xmlns:param="clr-namespace:RecipeEditorControl.RecipeEditorParamEdit;assembly=RecipeEditorControl"
             xmlns:sys="clr-namespace:System;assembly=mscorlib"
             xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
             xmlns:System="clr-namespace:System;assembly=mscorlib"
             xmlns:stifparam="clr-namespace:ResultMapParamObject.STIF;assembly=ResultMapParamObject"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800">
    <UserControl.Resources>
        <ResourceDictionary>

            <local:RefCalcModeToVisibilityConverter x:Key="RefCalcModeToVisibilityCon"/>
            
            <Style TargetType="{x:Type ScrollBar}" BasedOn="{StaticResource {x:Type ScrollBar}}">
                <Style.Resources>
                    <sys:Double x:Key="{x:Static SystemParameters.VerticalScrollBarButtonHeightKey}">42</sys:Double>
                    <sys:Double x:Key="{x:Static SystemParameters.VerticalScrollBarWidthKey}">42</sys:Double>
                    <sys:Double x:Key="{x:Static SystemParameters.HorizontalScrollBarHeightKey}">42</sys:Double>
                    <sys:Double x:Key="{x:Static SystemParameters.HorizontalScrollBarButtonWidthKey}">42</sys:Double>
                </Style.Resources>
            </Style>

            <ObjectDataProvider x:Key="getDataFromRefCalcEnum" MethodName="GetValues" ObjectType="{x:Type System:Enum}">
                <ObjectDataProvider.MethodParameters>
                    <x:Type TypeName="stifparam:RefCalcEnum"/>
                </ObjectDataProvider.MethodParameters>
            </ObjectDataProvider>
            
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/SettingControlStyle;component/SettingViewStyleDictionaly.xaml" />
            </ResourceDictionary.MergedDictionaries>
            
        </ResourceDictionary>

    </UserControl.Resources>
    
    <Grid>
        
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <!--<RowDefinition Height="Auto"/>-->
        </Grid.RowDefinitions>

        <Label  Content="Device > Result Data > Data Format Setup"
                Foreground="White"
                FontWeight="Bold"
                FontSize="32"      
                Grid.Column="0" Grid.Row="0"/>

        <Separator Margin="4" Background="White" Grid.ColumnSpan="2" 
                   VerticalAlignment="Bottom"/>

        <param:UcRecipeEditorParamEdit Grid.Row="1" DataContext="{Binding RecipeEditorParamEdit}"/>

        <TabControl Grid.Row="2">
            <TabItem Header="STIF" FontSize="24">

                <StackPanel Orientation="Vertical" Background="Black">

                    <StackPanel Orientation="Horizontal">

                        <Label Content="Version" Foreground="White" VerticalAlignment="Center"></Label>

                        <ComboBox AutomationProperties.AutomationId="cmbSTIFVersion"
                                  Width="Auto" Height="Auto" MinWidth="100"
                                  Foreground="White" 
                                  HorizontalContentAlignment="Center"
                                  VerticalContentAlignment="Center"
                                  ItemsSource="{Binding STIFVersions, Mode=OneTime}"
                                  SelectedItem="{Binding ResultMapConvParam.STIFParam.Version.Value}"
                                  HorizontalAlignment="Center" VerticalAlignment="Center">
                            <i:Interaction.Triggers>
                                <i:EventTrigger EventName="SelectionChanged">
                                    <i:InvokeCommandAction Command="{Binding DataContext.ChangedSTIFVersionCommand, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}}"/>
                                </i:EventTrigger>
                            </i:Interaction.Triggers>
                        </ComboBox>
                        
                    </StackPanel>

                    <StackPanel Orientation="Horizontal">

                        <Label Content="Namer alias" Foreground="White" VerticalAlignment="Center"></Label>

                        <ComboBox AutomationProperties.AutomationId="cmbSTIFNamer"
                                  Width="Auto" Height="Auto" MinWidth="150"
                                  Foreground="White" 
                                  HorizontalContentAlignment="Center"
                                  VerticalContentAlignment="Center"
                                  ItemsSource="{Binding NamerAliasArray, Mode=TwoWay}"
                                  SelectedItem="{Binding ResultMapConvParam.STIFParam.NamerAlias.Value}"
                                  HorizontalAlignment="Center" VerticalAlignment="Center">
                            <i:Interaction.Triggers>
                                <i:EventTrigger EventName="SelectionChanged">
                                    <i:InvokeCommandAction Command="{Binding DataContext.ChangedSTIFNamerAliasCommand, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}}"/>
                                </i:EventTrigger>
                            </i:Interaction.Triggers>
                        </ComboBox>

                    </StackPanel>

                    <StackPanel Orientation="Horizontal">

                        <Label Content="REF calculation method" Foreground="White" VerticalAlignment="Center"></Label>

                        <ComboBox Width="Auto" Height="Auto" MinWidth="150"
                                      Foreground="White" 
                                      HorizontalContentAlignment="Center"
                                      VerticalContentAlignment="Center"
                                      ItemsSource="{Binding Source={StaticResource getDataFromRefCalcEnum}}"
                                      SelectedItem="{Binding ResultMapConvParam.STIFParam.RefCalcMode.Value}"
                                      HorizontalAlignment="Center" VerticalAlignment="Center">
                            <i:Interaction.Triggers>
                                <i:EventTrigger EventName="SelectionChanged">
                                    <i:InvokeCommandAction Command="{Binding DataContext.ChangedSTIFNamerAliasCommand, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}}"/>
                                </i:EventTrigger>
                            </i:Interaction.Triggers>
                        </ComboBox>

                    </StackPanel>

                    <StackPanel Orientation="Horizontal" Visibility="{Binding ResultMapConvParam.STIFParam.RefCalcMode.Value, Converter={StaticResource RefCalcModeToVisibilityCon}}">

                        <Label Content="XREF manual value" Foreground="White" VerticalAlignment="Center"></Label>

                        <TextBox Text="{Binding ResultMapConvParam.STIFParam.XRefManualValue.Value}">
                            <i:Interaction.Triggers>
                                <i:EventTrigger EventName="PreviewMouseDown" >
                                    <i:InvokeCommandAction Command="{Binding DataContext.FloatTextBoxClickCommand, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}}" 
                                                           CommandParameter="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type TextBox}}}"/>
                                </i:EventTrigger>
                            </i:Interaction.Triggers>
                        </TextBox>

                    </StackPanel>

                    <StackPanel Orientation="Horizontal" Visibility="{Binding ResultMapConvParam.STIFParam.RefCalcMode.Value, Converter={StaticResource RefCalcModeToVisibilityCon}}">

                        <Label Content="YREF manual value" Foreground="White" VerticalAlignment="Center"></Label>

                        <TextBox Text="{Binding ResultMapConvParam.STIFParam.YRefManualValue.Value}">
                            <i:Interaction.Triggers>
                                <i:EventTrigger EventName="PreviewMouseDown" >
                                    <i:InvokeCommandAction Command="{Binding DataContext.FloatTextBoxClickCommand, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}}" 
                                                           CommandParameter="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type TextBox}}}"/>
                                </i:EventTrigger>
                            </i:Interaction.Triggers>
                        </TextBox>

                    </StackPanel>
                    
                </StackPanel>

                
            </TabItem>
        </TabControl>

    </Grid>
</UserControl>
