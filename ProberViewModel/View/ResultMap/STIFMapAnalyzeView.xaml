<UserControl x:Class="ProberViewModel.STIFMapAnalyzeView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:ProberViewModel"
             xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
             xmlns:pi="clr-namespace:ProberInterfaces;assembly=ProberInterfaces"
             xmlns:rm="clr-namespace:ResultMapView;assembly=ResultMapView"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800">

    <UserControl.Resources>
        <local:ColorToSolidColorBrushValueConverter x:Key="ColorToSolidColorBrushValueConv"/>
    </UserControl.Resources>
    <Grid>

        <Grid.ColumnDefinitions>
            <ColumnDefinition/>
            <ColumnDefinition/>
        </Grid.ColumnDefinitions>

        <Border Grid.Column="0" BorderBrush="White" BorderThickness="1">
            <rm:ucResultMapViewer
                WaferObject="{Binding RelativeSource={RelativeSource Mode=FindAncestor,AncestorType={x:Type UserControl}},Path=DataContext.StageSupervisor.WaferObject}"
                ASCIIMap="{Binding RelativeSource={RelativeSource Mode=FindAncestor,AncestorType={x:Type UserControl}},Path=DataContext.ASCIIMap}"
                DisplayBinCode="{Binding RelativeSource={RelativeSource Mode=FindAncestor,AncestorType={x:Type UserControl}},Path=DataContext.DisplayBinCode}"
                CursorXIndex="{Binding RelativeSource={RelativeSource Mode=FindAncestor,AncestorType={x:Type UserControl}},Path=DataContext.CursorXIndex}"
                CursorYIndex="{Binding RelativeSource={RelativeSource Mode=FindAncestor,AncestorType={x:Type UserControl}},Path=DataContext.CursorYIndex}"
                >
            </rm:ucResultMapViewer>
        </Border>
        
        <!--<Grid Grid.Column="0">
            <rm:ucResultMapViewer>
            </rm:ucResultMapViewer>
            --><!--<MapUC:ucWaferMapviewer Margin="4" 
                                    WaferObject="{Binding RelativeSource={RelativeSource Mode=FindAncestor,AncestorType={x:Type UserControl}},Path=DataContext.StageSupervisor.WaferObject}"
                                    UnderDutDices="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.UnderDutDies}"
                                    CurrXYIndex="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.MXYIndex, Mode=TwoWay}" 
                                    EnalbeClickToMove="False"
                                    CoordinateManager="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.CoordinateManager, Mode=TwoWay}"
                                    IsCrossLineVisible="True"
                                    StageSyncEnalbe="False"
                                    RenderMode="BinMode"
                                    BINType ="{Binding BinType}"
                                    />--><!--
        </Grid>-->

        <Grid Grid.Column="1">

            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="9*"/>
            </Grid.RowDefinitions>

            <Border Grid.Row="0" BorderBrush="White" BorderThickness="1">

                <Grid>

                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <Grid Grid.Column="0">

                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <Grid Grid.Column="0">
                                <Label Content="Version" Foreground="White" VerticalAlignment="Center"></Label>
                            </Grid>

                            <Grid Grid.Column="1">
                                <ComboBox Width="Auto" Foreground="White" 
                                      HorizontalContentAlignment="Center"
                                      VerticalContentAlignment="Center"
                                      ItemsSource="{Binding STIFVersionlist}"
                                      SelectedItem="{Binding MapVersion, Mode=TwoWay}"
                                  MinWidth="75"
                                  MaxWidth="60" 
                                  MaxHeight="32"
                                  HorizontalAlignment="Left">
                                    <i:Interaction.Triggers>
                                        <!--<i:EventTrigger EventName="SelectionChanged">-->
                                        <local:HandlingEventTrigger EventName="SelectionChanged">
                                            <i:InvokeCommandAction Command="{Binding DataContext.ChangedSTIFVersionCommand, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}}"/>
                                        </local:HandlingEventTrigger>
                                    </i:Interaction.Triggers>
                                </ComboBox>
                            </Grid>
                        </Grid>
                    </Grid>

                    <Grid Grid.Column="1">

                        <Grid.ColumnDefinitions>
                            <ColumnDefinition/>
                            <ColumnDefinition/>
                        </Grid.ColumnDefinitions>

                        <Label Content="DISPLAY BIN CODE" Grid.Column="0" VerticalAlignment="Center"
                               FontSize="14" Margin="0" FontWeight="DemiBold"/>
                        
                        <ToggleButton Grid.Column="1" HorizontalAlignment="Left"
                                      Style="{StaticResource  ON_OFF_ToggleBtn}"
                                      IsChecked="{Binding DisplayBinCode}"
                                      MinWidth="50"
                                      MaxWidth="60"
                                      MaxHeight="32">
                        </ToggleButton>
                    </Grid>
                    
                    <Grid Grid.Column="2">

                        <Grid.ColumnDefinitions>
                            <ColumnDefinition/>
                            <ColumnDefinition/>
                        </Grid.ColumnDefinitions>
                        
                        <Label Content="Dummy BIN" Grid.Column="0" VerticalAlignment="Center"
                               FontSize="14" Margin="0" FontWeight="DemiBold"/>
                        
                        <ToggleButton Grid.Column="1" HorizontalAlignment="Left"
                                      Style="{DynamicResource  ON_OFF_ToggleBtn}"
                                      IsChecked="{Binding IsDummy}"
                                      MinWidth="50"
                                      MaxWidth="60"
                                      MaxHeight="32">
                        </ToggleButton>
                    </Grid>

                </Grid>
            </Border>

            <Border Grid.Row="1" BorderBrush="White" BorderThickness="1">

                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Center">
                    
                    <Button Content="EXPORT" Margin="2"
                            FontSize="16"
                            FontWeight="Bold"
                            Foreground="White"
                            MinWidth="150"
                            MinHeight="45" Command="{Binding ExportSTIFMapCommand}">
                    </Button>

                    <Button Content="IMPORT" Margin="2"
                            FontSize="16"
                            FontWeight="Bold"
                            Foreground="White"
                            MinWidth="150"
                            MinHeight="45" Command="{Binding ImportSTIFMapCommand}">
                    </Button>

                    <Button Content="GENERATE" Margin="2"
                            FontSize="16"
                            FontWeight="Bold"
                            Foreground="White"
                            MinWidth="150"
                            MinHeight="45" Command="{Binding STIFGenerateCommand}">
                    </Button>
                    
                </StackPanel>
                
                <!--<Grid>

                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <Grid Grid.Column="0">
                        <Button Content="GENERATE" Margin="5,5,5,5"
                            FontSize="16"
                            FontWeight="Bold"
                            Foreground="White"
                            MaxHeight="32" Command="{Binding STIFGenerateCommand}">
                        </Button>
                    </Grid>

                    <Grid Grid.Column="1">
                        <Button Content="EXPORT" Margin="5,5,5,5"
                            FontSize="16"
                            FontWeight="Bold"
                            Foreground="White"
                            MaxHeight="32" Command="{Binding ExportSTIFMapCommand}">
                        </Button>
                    </Grid>

                    <Grid Grid.Column="2">
                        <Button Content="IMPORT" Margin="5,5,5,5"
                            FontSize="16"
                            FontWeight="Bold"
                            Foreground="White"
                            MaxHeight="32" Command="{Binding ImportSTIFMapCommand}">
                        </Button>
                    </Grid>

                </Grid>-->
            </Border>
            
            <!-- Viewer -->
            <Border Grid.Row="2" BorderBrush="White" BorderThickness="1">
                <Grid >
                    <ListView ItemsSource="{Binding STIFResultMap}">
                        
                        <!-- Style -->
                        <!--<ListView.ItemContainerStyle>
                            
                            <Style TargetType="{x:Type ListViewItem}">
                                --><!--<Style.Resources>
                                     --><!--Foreground for Selected ListViewItem--><!-- 
                                    <SolidColorBrush x:Key="{x:Static SystemColors.HighlightTextBrushKey}" Color="Black"/>
                                     --><!--Background for Selected ListViewItem--><!-- 
                                    <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="Transparent"/>
                                </Style.Resources>--><!--

                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding Background.Color}" Value="Color.White">
                                        <Setter Property="Foreground" Value="Red" />
                                    </DataTrigger>
                                </Style.Triggers>
                                
                            </Style>
                            
                        </ListView.ItemContainerStyle>-->

                        <ListView.ItemTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Text}">
                                    <!--<Rectangle>
                                        <Rectangle.Fill>
                                            <SolidColorBrush Color="{Binding Background}" />
                                        </Rectangle.Fill>
                                    </Rectangle>-->
                                    
                                    <!--<TextBlock.Background>
                                        <SolidColorBrush Color="{Binding Background, Converter={StaticResource ColorToSolidColorBrushValueConv}}"/>
                                    </TextBlock.Background>-->
                                    
                                    <TextBlock.Background>
                                        <SolidColorBrush Color="{Binding Background.Color, Mode=TwoWay}"/>
                                    </TextBlock.Background>
                                    
                                </TextBlock>
                            </DataTemplate>
                        </ListView.ItemTemplate>
                        
                    </ListView>
                </Grid>
            </Border>
            
        </Grid>
        
        <!--<Grid Grid.Column="1">

            <Grid.RowDefinitions>
                <RowDefinition/>
                <RowDefinition/>
                <RowDefinition/>
            </Grid.RowDefinitions>

            <Grid Grid.Row="0">

                <StackPanel Orientation="Vertical">

                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"></ColumnDefinition>
                            <ColumnDefinition Width="*"></ColumnDefinition>
                        </Grid.ColumnDefinitions>
                        <Label Grid.Column="0" 
                                   Content="BIN type :"
                                   Foreground="White"/>
                        <TextBox Grid.Column="1" 
                                     VerticalAlignment="Center" 
                                     HorizontalAlignment="Stretch"
                                     VerticalContentAlignment="Center"
                                     HorizontalContentAlignment="Center"
                                     Text="{Binding BinType}"
                                     IsReadOnly="True"/>
                    </Grid>

                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"></ColumnDefinition>
                            <ColumnDefinition Width="*"></ColumnDefinition>
                        </Grid.ColumnDefinitions>
                        <Label Grid.Column="0" 
                                   Content="Dut count :"
                                   Foreground="White"/>
                        <TextBox Grid.Column="1" 
                                     VerticalAlignment="Center" 
                                     HorizontalAlignment="Stretch"
                                     VerticalContentAlignment="Center"
                                     HorizontalContentAlignment="Center"
                                     Text="{Binding DutCount}"
                                     IsReadOnly="True"/>
                    </Grid>
                    
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"></ColumnDefinition>
                            <ColumnDefinition Width="*"></ColumnDefinition>
                        </Grid.ColumnDefinitions>
                        <Label Grid.Column="0" 
                                   Content="BIN Data :"
                                   Foreground="White"/>
                        <TextBox Grid.Column="1" 
                                     VerticalAlignment="Center" 
                                     HorizontalAlignment="Stretch"
                                     VerticalContentAlignment="Center"
                                     HorizontalContentAlignment="Center"
                                     Text="{Binding CurrentBINData}"
                                     IsReadOnly="True"/>
                    </Grid>


                </StackPanel>
            </Grid>

            <Grid Grid.Row="1">

                <Button Grid.Column="0" 
                        Content="CLEAR" 
                        Margin="4"
                        FontSize="16"
                        FontWeight="Bold"
                        Foreground="Linen"
                        MaxHeight="32" Command="{Binding BINDataClearComand}">
                </Button>

            </Grid>

            <Grid Grid.Row="2">

                --><!-- Probing seq.--><!--

                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="6*"/>
                    <ColumnDefinition Width="8*"/>
                    <ColumnDefinition Width="6*"/>
                </Grid.ColumnDefinitions>

                <Button Grid.Column="0" 
                        Content="PREV" 
                        Margin="4"
                        FontSize="16"
                        FontWeight="Bold"
                        Foreground="Linen"
                        MaxHeight="32"
                        >
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="Click">
                            <i:InvokeCommandAction Command="{Binding ChangeProbingSeqIndexCommand}"
                                                   CommandParameter="{x:Static pi:SEQ_DIRECTION.PREV}"/>
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                </Button>

                <Button Grid.Column="2" 
                        Content="NEXT" 
                        Margin="4"
                        FontSize="16"
                        FontWeight="Bold"
                        Foreground="Linen"
                        MaxHeight="32"
                        >
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="Click">
                            <i:InvokeCommandAction Command="{Binding ChangeProbingSeqIndexCommand}"
                                                   CommandParameter="{x:Static pi:SEQ_DIRECTION.NEXT}"/>
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                </Button>

            </Grid>

        </Grid>-->
    </Grid>
</UserControl>
